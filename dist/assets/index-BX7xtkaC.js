import{r as e,a as t,g as s}from"./vendor-Z2Iecplj.js";import{r as a,u as r,i,a as n,R as o}from"./utils-BXLNsX9R.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var l,d,c={exports:{}},m={};var u,x=(d||(d=1,c.exports=function(){if(l)return m;l=1;var t=e(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,a){var o,l={},d=null,c=null;for(o in void 0!==a&&(d=""+a),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)r.call(t,o)&&!n.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:s,type:e,key:d,ref:c,props:l,_owner:i.current}}return m.Fragment=a,m.jsx=o,m.jsxs=o,m}()),c.exports),h={};const p=s(function(){if(u)return h;u=1;var e=t();return h.createRoot=e.createRoot,h.hydrateRoot=e.hydrateRoot,h}());let g,f,b,j={data:""},v=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,y=/\/\*[^]*?\*\/|  +/g,N=/\n+/g,w=(e,t)=>{let s="",a="",r="";for(let i in e){let n=e[i];"@"==i[0]?"i"==i[1]?s=i+" "+n+";":a+="f"==i[1]?w(n,i):i+"{"+w(n,"k"==i[1]?"":t)+"}":"object"==typeof n?a+=w(n,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=n&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=w.p?w.p(i,n):i+":"+n+";")}return s+(t&&r?t+"{"+r+"}":r)+a},_={},k=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+k(e[s]);return t}return e};function S(e){let t=this||{},s=e.call?e(t.p):e;return((e,t,s,a,r)=>{let i=k(e),n=_[i]||(_[i]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(i));if(!_[n]){let t=i!==e?e:(e=>{let t,s,a=[{}];for(;t=v.exec(e.replace(y,""));)t[4]?a.shift():t[3]?(s=t[3].replace(N," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(N," ").trim();return a[0]})(e);_[n]=w(r?{["@keyframes "+n]:t}:t,s?"":"."+n)}let o=s&&_.g?_.g:null;return s&&(_.g=_[n]),l=_[n],d=t,c=a,(m=o)?d.data=d.data.replace(m,l):-1===d.data.indexOf(l)&&(d.data=c?l+d.data:d.data+l),n;var l,d,c,m})(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,r)=>{let i=t[r];if(i&&i.call){let e=i(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":w(e,""):!1===e?"":e}return e+a+(null==i?"":i)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,(a=t.target,"object"==typeof window?((a?a.querySelector("#_goober"):window._goober)||Object.assign((a||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:a||j),t.g,t.o,t.k);var a}S.bind({g:1});let C=S.bind({k:1});function q(e,t){let s=this||{};return function(){let t=arguments;return function a(r,i){let n=Object.assign({},r),o=n.className||a.className;s.p=Object.assign({theme:f&&f()},n),s.o=/ *go\d+/.test(o),n.className=S.apply(s,t)+(o?" "+o:"");let l=e;return e[0]&&(l=n.as||e,delete n.as),b&&l[0]&&b(n),g(l,n)}}}var A=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,I=(()=>{let e=0;return()=>(++e).toString()})(),P=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),E="default",O=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:a}=t;return O(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},D=[],R={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},$={},L=(e,t=E)=>{$[t]=O($[t]||R,e),D.forEach(([e,s])=>{e===t&&s($[t])})},T=e=>Object.keys($).forEach(t=>L(e,t)),z=(e=E)=>t=>{L(t,e)},F={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},U=e=>(t,s)=>{let a=((e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||I()}))(t,e,s);return z(a.toasterId||(e=>Object.keys($).find(t=>$[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},M=(e,t)=>U("blank")(e,t);M.error=U("error"),M.success=U("success"),M.loading=U("loading"),M.custom=U("custom"),M.dismiss=(e,t)=>{let s={type:3,toastId:e};t?z(t)(s):T(s)},M.dismissAll=e=>M.dismiss(void 0,e),M.remove=(e,t)=>{let s={type:4,toastId:e};t?z(t)(s):T(s)},M.removeAll=e=>M.remove(void 0,e),M.promise=(e,t,s)=>{let a=M.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?A(t.success,e):void 0;return r?M.success(r,{id:a,...s,...null==s?void 0:s.success}):M.dismiss(a),e}).catch(e=>{let r=t.error?A(t.error,e):void 0;r?M.error(r,{id:a,...s,...null==s?void 0:s.error}):M.dismiss(a)}),e};var V,Y,B,J,X=(e,t="default")=>{let{toasts:s,pausedAt:r}=((e={},t=E)=>{let[s,r]=a.useState($[t]||R),i=a.useRef($[t]);a.useEffect(()=>(i.current!==$[t]&&r($[t]),D.push([t,r]),()=>{let e=D.findIndex(([e])=>e===t);e>-1&&D.splice(e,1)}),[t]);let n=s.toasts.map(t=>{var s,a,r;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(a=e[t.type])?void 0:a.duration)||(null==e?void 0:e.duration)||F[t.type],style:{...e.style,...null==(r=e[t.type])?void 0:r.style,...t.style}}});return{...s,toasts:n}})(e,t),i=a.useRef(new Map).current,n=a.useCallback((e,t=1e3)=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),o({type:4,toastId:e})},t);i.set(e,s)},[]);a.useEffect(()=>{if(r)return;let e=Date.now(),a=s.map(s=>{if(s.duration===1/0)return;let a=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(a<0))return setTimeout(()=>M.dismiss(s.id,t),a);s.visible&&M.dismiss(s.id)});return()=>{a.forEach(e=>e&&clearTimeout(e))}},[s,r,t]);let o=a.useCallback(z(t),[t]),l=a.useCallback(()=>{o({type:5,time:Date.now()})},[o]),d=a.useCallback((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),c=a.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),m=a.useCallback((e,t)=>{let{reverseOrder:a=!1,gutter:r=8,defaultPosition:i}=t||{},n=s.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=n.findIndex(t=>t.id===e.id),l=n.filter((e,t)=>t<o&&e.visible).length;return n.filter(e=>e.visible).slice(...a?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+r,0)},[s]);return a.useEffect(()=>{s.forEach(e=>{if(e.dismissed)n(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[s,n]),{toasts:s,handlers:{updateHeight:d,startPause:l,endPause:c,calculateOffset:m}}},H=C`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,G=C`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,W=C`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,K=q("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${H} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${G} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${W} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Z=C`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Q=q("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Z} 1s linear infinite;
`,ee=C`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,te=C`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,se=q("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ee} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${te} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ae=q("div")`
  position: absolute;
`,re=q("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ie=C`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ne=q("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ie} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,oe=({toast:e})=>{let{icon:t,type:s,iconTheme:r}=e;return void 0!==t?"string"==typeof t?a.createElement(ne,null,t):t:"blank"===s?null:a.createElement(re,null,a.createElement(Q,{...r}),"loading"!==s&&a.createElement(ae,null,"error"===s?a.createElement(K,{...r}):a.createElement(se,{...r})))},le=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,de=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,ce=q("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,me=q("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ue=a.memo(({toast:e,position:t,style:s,children:r})=>{let i=e.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,r]=P()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[le(s),de(s)];return{animation:t?`${C(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${C(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},n=a.createElement(oe,{toast:e}),o=a.createElement(me,{...e.ariaProps},A(e.message,e));return a.createElement(ce,{className:e.className,style:{...i,...s,...e.style}},"function"==typeof r?r({icon:n,message:o}):a.createElement(a.Fragment,null,n,o))});V=a.createElement,w.p=Y,g=V,f=B,b=J;var xe=({id:e,className:t,style:s,onHeightUpdate:r,children:i})=>{let n=a.useCallback(t=>{if(t){let s=()=>{let s=t.getBoundingClientRect().height;r(e,s)};s(),new MutationObserver(s).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return a.createElement("div",{ref:n,className:t,style:s},i)},he=S`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,pe=({reverseOrder:e,position:t="top-center",toastOptions:s,gutter:r,children:i,toasterId:n,containerStyle:o,containerClassName:l})=>{let{toasts:d,handlers:c}=X(s,n);return a.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},d.map(s=>{let n=s.position||t,o=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:P()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...a,...r}})(n,c.calculateOffset(s,{reverseOrder:e,gutter:r,defaultPosition:t}));return a.createElement(xe,{id:s.id,key:s.id,onHeightUpdate:c.updateHeight,className:s.visible?he:"",style:o},"custom"===s.type?A(s.message,s):i?i(s):a.createElement(ue,{toast:s,position:n}))}))},ge=M;const fe=a.createContext(null),be=({children:e})=>{const[t,s]=a.useState(null),[r,i]=a.useState(localStorage.getItem("token"));a.useEffect(()=>{if(r)try{const e=JSON.parse(atob(r.split(".")[1]));s(e)}catch(V){console.error("Invalid token:",V),localStorage.removeItem("token"),i(null)}},[r]);return x.jsx(fe.Provider,{value:{user:t,token:r,login:e=>{localStorage.setItem("token",e),i(e)},logout:()=>{localStorage.removeItem("token"),i(null),s(null)}},children:e})},je=()=>a.useContext(fe);async function ve(e,t={}){try{const s=localStorage.getItem("token"),a={"Content-Type":"application/json",...t.headers};s&&(a.Authorization=`Bearer ${s}`);const r=await fetch(`${e}`||e,{...t,headers:a});if(!r.ok){401!==r.status&&403!==r.status||(localStorage.removeItem("token"),window.location.reload());const e=await r.json().catch(()=>({message:"Network response was not ok"}));throw new Error(e.error||"An unknown error occurred")}return 204===r.status?null:await r.json()}catch(s){throw console.error(`API call to ${e} failed:`,s),s}}function ye(e=void 0){let t="";if(e&&(e.status||e.q||e.limit||e.offset)){const s=new URLSearchParams;e.status&&s.set("status",e.status),e.q&&s.set("q",e.q),e.limit&&s.set("limit",String(e.limit)),e.offset&&s.set("offset",String(e.offset)),t=`?${s.toString()}`}return ve(`/api/requests${t}`)}function Ne(){return ve("/api/contacts")}function we(){return ve("/api/users")}function _e(e,t){return ve(`/api/requests/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})})}function ke(){return ve("/api/stats/overview")}const Se=a.createContext(),Ce=({children:e})=>{const[t,s]=a.useState(()=>localStorage.getItem("theme")||"dark");a.useEffect(()=>{localStorage.setItem("theme",t),document.documentElement.setAttribute("data-theme",t)},[t]);return x.jsx(Se.Provider,{value:{theme:t,toggleTheme:()=>{s(e=>"dark"===e?"light":"dark")},isDark:"dark"===t},children:e})},qe=()=>{const e=a.useContext(Se);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e};function Ae(){const[e,t]=a.useState(null),[s,i]=a.useState(new Date),{user:n}=je(),{theme:o,toggleTheme:l,isDark:d}=qe(),{t:c,i18n:m}=r();a.useEffect(()=>{let e=!0;return ke().then(s=>{e&&t(s)}).catch(()=>{}),()=>{e=!1}},[]),a.useEffect(()=>{const e=setInterval(()=>i(new Date),1e3);return()=>clearInterval(e)},[]);return x.jsxs("header",{className:"ios-header",children:[x.jsx("div",{className:"container mx-auto px-6",children:x.jsxs("div",{className:"flex items-center justify-between py-6",children:[x.jsx("div",{className:"flex items-center gap-6",children:x.jsxs("div",{className:"ios-header-brand flex items-center gap-4",children:[x.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-lg",children:x.jsx("i",{className:"fas fa-car-crash text-ios-primary text-xl font-bold"})}),x.jsxs("div",{className:"text-white",children:[x.jsx("h1",{className:"text-2xl font-bold leading-tight",children:c("brand")}),x.jsx("p",{className:"text-xs text-white/80 uppercase tracking-wider font-medium",children:c("tagline")})]})]})}),x.jsx("div",{className:"hidden xl:flex items-center",children:e&&x.jsxs("div",{className:"ios-header-stats flex items-center gap-8 px-8 py-6",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-bold text-theme-text mb-1",children:e.totalRequests}),x.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:c("stats.total")})]}),x.jsx("div",{className:"w-px h-10 bg-theme-border"}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-bold text-ios-warning mb-1",children:e.submitted}),x.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:c("stats.pending")})]}),x.jsx("div",{className:"w-px h-10 bg-theme-border"}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-bold text-ios-primary mb-1",children:e.inProgress}),x.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:c("stats.active")})]}),x.jsx("div",{className:"w-px h-10 bg-theme-border"}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-bold text-ios-success mb-1",children:e.completed}),x.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:c("stats.done")})]})]})}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("div",{className:"ios-header-controls flex items-center gap-3 px-4 py-3",children:[x.jsx("i",{className:"fas fa-globe text-ios-primary text-sm"}),x.jsxs("select",{value:m.language,onChange:e=>(t=>{m.changeLanguage(t);try{localStorage.setItem("language",t)}catch(e){}})(e.target.value),className:"bg-transparent text-sm text-theme-text font-semibold focus:outline-none cursor-pointer min-w-[60px]",children:[x.jsx("option",{value:"en",children:"EN"}),x.jsx("option",{value:"fr",children:"FR"})]})]}),x.jsx("button",{onClick:l,className:"ios-header-controls p-3 hover:scale-105 transition-transform duration-300",title:c("theme.switch",{mode:d?"light":"dark"}),children:x.jsx("i",{className:`fas ${d?"fa-sun":"fa-moon"} text-lg text-theme-text`})}),x.jsxs("div",{className:"hidden lg:block ios-header-controls text-center px-4 py-3",children:[x.jsx("div",{className:"text-lg font-mono font-bold text-theme-text",children:(u=s,u.toLocaleTimeString("fr"===m.language?"fr-FR":"en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}))}),x.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:(e=>e.toLocaleDateString("fr"===m.language?"fr-FR":"en-US",{weekday:"short",month:"short",day:"numeric"}))(s)})]}),n&&x.jsxs("div",{className:"ios-header-controls flex items-center gap-4 px-4 py-3",children:[x.jsx("div",{className:"w-3 h-3 rounded-full bg-ios-success animate-pulse"}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"text-sm font-bold text-theme-text",children:n.username}),x.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:"super_admin"===n.role?c("role.super_admin"):c("role.admin")})]})]})]})]})}),x.jsx("div",{className:"lg:hidden border-t border-theme-border/50 bg-theme-surface/50",children:x.jsx("div",{className:"container mx-auto px-6",children:x.jsx("div",{className:"flex justify-center py-4",children:e&&x.jsxs("div",{className:"ios-header-stats flex items-center gap-6 px-6 py-4",children:[x.jsxs("span",{className:"flex items-center gap-2 text-theme-text-secondary text-sm font-semibold",children:[x.jsx("i",{className:"fas fa-chart-bar text-xs"}),c("dashboard.total"),":"," ",x.jsx("span",{className:"text-theme-text font-bold",children:e.totalRequests})]}),x.jsxs("span",{className:"flex items-center gap-2 text-theme-text-secondary text-sm font-semibold",children:[x.jsx("div",{className:"w-2 h-2 bg-ios-warning rounded-full"}),c("dashboard.pending"),":"," ",x.jsx("span",{className:"text-ios-warning font-bold",children:e.submitted})]}),x.jsxs("span",{className:"flex items-center gap-2 text-theme-text-secondary text-sm font-semibold",children:[x.jsx("div",{className:"w-2 h-2 bg-ios-primary rounded-full"}),c("stats.active"),":"," ",x.jsx("span",{className:"text-ios-primary font-bold",children:e.inProgress})]}),x.jsxs("span",{className:"flex items-center gap-2 text-theme-text-secondary text-sm font-semibold",children:[x.jsx("div",{className:"w-2 h-2 bg-ios-success rounded-full"}),c("stats.done"),":"," ",x.jsx("span",{className:"text-ios-success font-bold",children:e.completed})]})]})})})})]});var u}function Ie({isOpen:e,onClose:t,requestId:s,contacts:i,users:n,onAssignmentSuccess:o}){const[l,d]=a.useState(""),[c,m]=a.useState(""),[u,h]=a.useState("assigned"),[p,g]=a.useState(!1),{t:f}=r();a.useEffect(()=>{e||(d(""),m(""),h("assigned"))},[e]);return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 transition-opacity duration-300 "+(e?"opacity-100":"opacity-0 pointer-events-none"),children:x.jsxs("div",{className:"glass-effect rounded-lg p-6 shadow-2xl transform transition-all duration-300 max-w-md w-full mx-4 "+(e?"scale-100 opacity-100":"scale-95 opacity-0"),children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("h3",{className:"text-lg font-bold text-white",children:f("modal.assignment.title")}),x.jsx("button",{onClick:t,className:"text-white/60 hover:text-white",children:x.jsx("i",{className:"fas fa-times text-xl"})})]}),x.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l&&c){g(!0);try{await(a={requestId:s,operatorId:l,userId:c,status:u},ve("/api/assignments",{method:"POST",body:JSON.stringify(a)})),ge.success(f("toast.assignment_success",{defaultValue:"Assignment successful!"})),o(),t()}catch(r){ge.error(f("error.assignment_failed",{defaultValue:"Assignment failed."}))}finally{g(!1)}var a}else ge.error(f("error.assignment_select_both",{defaultValue:"Please select both an operator and a user."}))},className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"assignment-contact",className:"block text-sm font-medium text-white/90 mb-1",children:f("modal.assignment.select_operator")}),x.jsxs("select",{id:"assignment-contact",value:l,onChange:e=>d(e.target.value),className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-white/50",required:!0,children:[x.jsx("option",{value:"",children:f("modal.assignment.choose_operator")}),i.map(e=>x.jsxs("option",{value:e.id,children:[e.name," (",e.role,")"]},e.id))]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"assignment-user",className:"block text-sm font-medium text-white/90 mb-1",children:f("modal.assignment.select_user")}),x.jsxs("select",{id:"assignment-user",value:c,onChange:e=>m(e.target.value),className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-white/50",required:!0,children:[x.jsx("option",{value:"",children:f("modal.assignment.choose_user")}),n.map(e=>x.jsxs("option",{value:e.id,children:[e.username," (",e.role,")"]},e.id))]})]}),x.jsxs("div",{className:"flex gap-3 pt-4",children:[x.jsx("button",{type:"submit",disabled:p,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-gray-500 transition-colors",children:f(p?"modal.assignment.assigning":"modal.assignment.assign")}),x.jsx("button",{type:"button",onClick:t,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:f("modal.cancel")})]})]})]})})}function Pe({isOpen:e,onClose:t,contacts:s,onSuccess:i}){const[n,o]=a.useState({customerName:"",customerPhone:"",location:"",carModel:"",carYear:"",issueDescription:"",urgencyLevel:"medium",imageUrl:"",assignToOperator:""}),[l,d]=a.useState(null),[c,m]=a.useState(null),[u,h]=a.useState(!1),{t:p}=r();a.useEffect(()=>{e||(o({customerName:"",customerPhone:"",location:"",carModel:"",carYear:"",issueDescription:"",urgencyLevel:"medium",imageUrl:"",assignToOperator:""}),d(null),m(null))},[e]);const g=e=>{const{name:t,value:s}=e.target;o(e=>({...e,[t]:s}))};return e?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"glass-effect rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[x.jsx("div",{className:"p-6 border-b border-white/20",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:p("modal.create_request.title")}),x.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-2xl",children:x.jsx("i",{className:"fas fa-times"})})]})}),x.jsxs("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{const e=`${n.customerName}\n${n.carModel} ${n.carYear}\n${n.customerPhone}\n${n.location}\n\nIssue: ${n.issueDescription}\nUrgency: ${n.urgencyLevel.toUpperCase()}`;let r;if(l){const t=new FormData;t.append("userInfo",e),t.append("photo",l),r=await async function(e){try{const t=localStorage.getItem("token"),s={};t&&(s.Authorization=`Bearer ${t}`);const a=await fetch("/api/requests",{method:"POST",headers:s,body:e});if(!a.ok){401!==a.status&&403!==a.status||(localStorage.removeItem("token"),window.location.reload());const e=await a.json().catch(()=>({message:"Network response was not ok"}));throw new Error(e.error||"An unknown error occurred")}return await a.json()}catch(t){throw console.error("API createRequest failed:",t),t}}(t)}else r=await(s={userInfo:e,imageUrl:n.imageUrl||null},ve("/api/requests",{method:"POST",body:JSON.stringify(s)}));if(ge.success(p("toast.request_created",{defaultValue:"Request created successfully!"})),n.assignToOperator&&r.id)try{await fetch("/api/assignments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({requestId:r.id,operatorId:n.assignToOperator,userId:JSON.parse(atob(localStorage.getItem("token").split(".")[1])).id,status:"assigned"})}),ge.success(p("toast.request_assigned",{defaultValue:"Request assigned to operator!"}))}catch(a){console.warn("Assignment failed:",a),ge.error(p("error.assignment_partial",{defaultValue:"Request created but assignment failed"}))}i(),t()}catch(r){ge.error(p("error.create_request_failed",{defaultValue:"Failed to create request."}))}finally{h(!1)}var s},className:"p-6 space-y-6",children:[x.jsxs("div",{children:[x.jsxs("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2 mb-4",children:[x.jsx("i",{className:"fas fa-user mr-2"}),"Customer & Vehicle Information"]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-white/90 mb-2",children:[p("modal.customer_info")," & ",p("modal.vehicle_info")]}),x.jsx("textarea",{name:"customerInfo",value:`${n.customerName}\n${n.carModel} ${n.carYear}\n${n.customerPhone}\n${n.location}`,onChange:e=>{const t=(e=>{const t=e.split("\n").map(e=>e.trim()).filter(e=>e);return{customerName:t[0]||"",carModel:t[1]?.split(" ").slice(0,-1).join(" ")||"",carYear:t[1]?.split(" ").pop()||"",customerPhone:t[2]||"",location:t[3]||""}})(e.target.value);o(e=>({...e,...t}))},required:!0,rows:"4",className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Line 1: ${p("modal.customer_name_ph")}\nLine 2: ${p("modal.car_model_ph")} ${p("modal.year")} (e.g., Toyota Corolla 2020)\nLine 3: ${p("modal.phone_ph")}\nLine 4: ${p("modal.location_ph")}\n\n⚠️ Put each answer on a separate line`}),x.jsxs("p",{className:"text-xs text-white/60 mt-2",children:[x.jsx("i",{className:"fas fa-info-circle mr-1"}),x.jsx("strong",{children:"Format:"})," Name on line 1, Car Model & Year on line 2, Phone on line 3, Location on line 4"]})]}),x.jsxs("div",{className:"mt-4",children:[x.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:p("modal.urgency")}),x.jsxs("select",{name:"urgencyLevel",value:n.urgencyLevel,onChange:g,className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[x.jsx("option",{value:"low",children:p("modal.urgency.low")}),x.jsx("option",{value:"medium",children:p("modal.urgency.medium")}),x.jsx("option",{value:"high",children:p("modal.urgency.high")}),x.jsx("option",{value:"emergency",children:p("modal.urgency.emergency")})]})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:p("modal.issue")}),x.jsx("textarea",{name:"issueDescription",value:n.issueDescription,onChange:g,required:!0,rows:"4",className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:p("modal.issue_ph")})]}),x.jsxs("div",{children:[x.jsxs("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2 mb-4",children:[x.jsx("i",{className:"fas fa-camera mr-2"}),p("modal.attach_photo")]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:p("modal.upload_device")}),x.jsxs("div",{className:"border-2 border-dashed border-white/30 rounded-lg p-6 text-center bg-white/5 hover:bg-white/10 transition-colors",children:[x.jsx("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(t){d(t);const e=new FileReader;e.onload=e=>m(e.target.result),e.readAsDataURL(t),o(e=>({...e,imageUrl:""}))}},accept:"image/*",className:"hidden",id:"file-upload"}),x.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[x.jsx("i",{className:"fas fa-cloud-upload-alt text-3xl text-white/60 mb-2 block"}),x.jsx("p",{className:"text-white/80",children:p("modal.click_upload")}),x.jsx("p",{className:"text-white/60 text-sm",children:p("user.file_hint")})]})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:p("modal.or_paste_url")}),x.jsx("input",{type:"url",value:n.imageUrl,onChange:e=>{const t=e.target.value;o(e=>({...e,imageUrl:t})),t?(d(null),m(t)):m(null)},className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"})]})]}),c&&x.jsxs("div",{className:"mt-4",children:[x.jsx("p",{className:"text-sm font-medium text-white/90 mb-2",children:p("modal.preview")}),x.jsxs("div",{className:"relative inline-block",children:[x.jsx("img",{src:c,alt:"Preview",className:"max-w-xs max-h-48 rounded-lg border border-white/20"}),x.jsx("button",{type:"button",onClick:()=>{m(null),d(null),o(e=>({...e,imageUrl:""}))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:x.jsx("i",{className:"fas fa-times"})})]})]})]}),s&&s.length>0&&x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:p("modal.operator_optional")}),x.jsxs("select",{name:"assignToOperator",value:n.assignToOperator,onChange:g,className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[x.jsx("option",{value:"",children:p("modal.operator_select")}),s.map(e=>x.jsx("option",{value:e.id,children:e.name},e.id))]})]}),x.jsxs("div",{className:"flex gap-4 pt-4 border-t border-white/20",children:[x.jsx("button",{type:"submit",disabled:u,className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?x.jsxs(x.Fragment,{children:[x.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),p("modal.create")]}):x.jsxs(x.Fragment,{children:[x.jsx("i",{className:"fas fa-plus mr-2"}),p("modal.create")]})}),x.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white/20 hover:bg-white/30 text-white font-medium rounded-lg transition-colors",children:p("modal.cancel")})]})]})]})}):null}const Ee=e=>{switch(e){case"Submitted":return"bg-ios-warning text-white";case"In Progress":return"bg-ios-primary text-white";case"Completed":return"bg-ios-success text-white";default:return"bg-gray-500 text-white"}},Oe=e=>{switch(e){case"Submitted":return"fas fa-clock";case"In Progress":return"fas fa-cog fa-spin";case"Completed":return"fas fa-check-circle";default:return"fas fa-question-circle"}},De=e=>{switch(e){case"LOW":return"bg-ios-success/20 text-ios-success border-ios-success/40";case"MEDIUM":return"bg-ios-warning/20 text-ios-warning border-ios-warning/40";case"HIGH":return"bg-ios-error/20 text-ios-error border-ios-error/40";case"EMERGENCY":return"bg-red-500/20 text-red-500 border-red-500/40";default:return"bg-gray-500/20 text-gray-500 border-gray-500/40"}};function Re({request:e,onAssign:t,onResolve:s,onDelete:a}){const{t:i}=r(),n="Completed"===e.status,o=e.userInfo?e.userInfo.split("\n").filter(e=>e.trim()):[],l=o[0]||"Unknown Customer",d=o[1]||"Vehicle info not provided",c=o[2]||"No phone",m=o[3]||"Location not specified",u=o.findIndex(e=>e.toLowerCase().includes("issue:")),h=-1!==u?o[u].replace(/^issue:\s*/i,""):"No issue description",p=e.userInfo?.match(/Urgency:\s*(LOW|MEDIUM|HIGH|EMERGENCY)/i),g=p?p[1].toUpperCase():null;return x.jsxs("div",{className:"ios-card relative "+(n?"opacity-75":""),children:[g&&x.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:x.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full border ${De(g)} font-medium uppercase tracking-wider`,children:g})}),x.jsx("div",{className:"absolute top-4 left-4 z-10",children:x.jsxs("span",{className:`text-xs font-bold px-3 py-1 rounded-full ${Ee(e.status)} flex items-center gap-2 font-medium uppercase tracking-wider`,children:[x.jsx("i",{className:Oe(e.status)}),e.status]})}),x.jsx("div",{className:"relative mb-6 overflow-hidden rounded-xl mt-8",children:x.jsx("img",{src:e.imageUrl||"https://placehold.co/600x400/0A0E27/8B5FFF?text=No+Image+Available",alt:"Service request",className:"w-full h-48 object-cover rounded-xl"})}),x.jsxs("div",{className:"mb-6 space-y-4",children:[x.jsxs("div",{className:"ios-card p-4",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.jsx("div",{className:"w-10 h-10 bg-ios-primary/20 rounded-lg flex items-center justify-center",children:x.jsx("i",{className:"fas fa-user text-ios-primary text-lg"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-bold text-theme-text",children:l}),x.jsx("p",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider",children:"Customer Information"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center gap-3 p-2 bg-theme-surface rounded-lg",children:[x.jsx("div",{className:"w-6 h-6 bg-ios-warning/20 rounded flex items-center justify-center",children:x.jsx("i",{className:"fas fa-car text-ios-warning text-sm"})}),x.jsx("span",{className:"text-sm text-theme-text font-medium",children:d})]}),x.jsxs("div",{className:"flex items-center gap-3 p-2 bg-theme-surface rounded-lg",children:[x.jsx("div",{className:"w-6 h-6 bg-ios-success/20 rounded flex items-center justify-center",children:x.jsx("i",{className:"fas fa-phone text-ios-success text-sm"})}),x.jsx("span",{className:"text-sm text-theme-text font-medium",children:c})]}),x.jsxs("div",{className:"flex items-center gap-3 p-2 bg-theme-surface rounded-lg",children:[x.jsx("div",{className:"w-6 h-6 bg-ios-error/20 rounded flex items-center justify-center",children:x.jsx("i",{className:"fas fa-map-marker-alt text-ios-error text-sm"})}),x.jsx("span",{className:"text-sm text-theme-text font-medium",children:m})]})]})]}),x.jsxs("div",{className:"ios-card p-4 border-l-4 border-ios-error",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.jsx("div",{className:"w-8 h-8 bg-ios-error/20 rounded-lg flex items-center justify-center",children:x.jsx("i",{className:"fas fa-exclamation-triangle text-ios-error text-sm"})}),x.jsx("h4",{className:"text-sm font-bold text-ios-error uppercase tracking-wider",children:i("request.issue.title")})]}),x.jsx("p",{className:"text-theme-text-secondary leading-relaxed",children:h})]}),e.contactName&&x.jsxs("div",{className:"ios-card p-4 border-l-4 border-ios-primary",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.jsx("div",{className:"w-8 h-8 bg-ios-primary/20 rounded-lg flex items-center justify-center",children:x.jsx("i",{className:"fas fa-user-cog text-ios-primary text-sm"})}),x.jsx("h4",{className:"text-sm font-bold text-ios-primary uppercase tracking-wider",children:i("request.assignment.title")})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between p-2 bg-theme-surface rounded-lg",children:[x.jsx("span",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-medium",children:i("request.assignment.operator")}),x.jsx("span",{className:"text-sm text-theme-text font-semibold",children:e.contactName})]}),x.jsxs("div",{className:"flex items-center justify-between p-2 bg-theme-surface rounded-lg",children:[x.jsx("span",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-medium",children:i("request.assignment.assigned_by")}),x.jsx("span",{className:"text-sm text-theme-text font-semibold",children:e.userName})]})]})]})]}),x.jsxs("div",{className:"flex gap-2 pt-4 border-t border-theme-border",children:[s&&x.jsxs("button",{onClick:()=>s(e.id),disabled:n,className:"flex-1 ios-button ios-button-success disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx("i",{className:"fas fa-check mr-2"}),x.jsx("span",{children:i("request.actions.resolve")})]}),t&&x.jsxs("button",{onClick:()=>t(e.id),disabled:n,className:"flex-1 ios-button ios-button-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx("i",{className:"fas fa-user-plus mr-2"}),x.jsx("span",{children:e.contactName?i("request.actions.reassign"):i("request.actions.assign")})]}),a&&x.jsxs("button",{onClick:()=>a(e.id),className:"w-full ios-button ios-button-error",children:[x.jsx("i",{className:"fas fa-trash mr-2"}),x.jsx("span",{children:i("request.actions.delete")})]})]})]})}const $e=()=>{const{t:e}=r();return x.jsx("footer",{className:"w-full mt-10",children:x.jsx("div",{className:"container mx-auto px-6",children:x.jsx("div",{className:"ios-card p-8",children:x.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8",children:[x.jsxs("div",{className:"flex items-center gap-6",children:[x.jsx("div",{className:"ios-header-brand flex items-center justify-center w-14 h-14",children:x.jsx("i",{className:"fas fa-car-burst text-white text-xl"})}),x.jsxs("div",{children:[x.jsx("div",{className:"text-theme-text font-bold text-xl",children:e("brand")}),x.jsx("p",{className:"text-theme-text-secondary text-sm max-w-md font-medium",children:e("footer.body")})]})]}),x.jsxs("div",{className:"text-theme-text-secondary text-sm text-center md:text-right",children:[x.jsxs("div",{className:"font-semibold",children:["© ",(new Date).getFullYear()," — ",e("footer.rights")]}),x.jsx("div",{className:"text-xs opacity-80 mt-2 font-medium",children:e("footer.made")})]})]})})})})};function Le(){const[e,t]=a.useState([]),[s,i]=a.useState([]),[n,o]=a.useState([]),[l,d]=a.useState(!0),[c,m]=a.useState(null),[u,h]=a.useState(""),[p,g]=a.useState(""),[f,b]=a.useState(!1),[j,v]=a.useState(null),[y,N]=a.useState(!1),{t:w}=r(),_=a.useCallback(async()=>{d(!0);try{const[e,s,a,r]=await Promise.all([ye({status:u||void 0,q:p||void 0,limit:100}),Ne(),we(),ke()]);t(e),i(s),o(a),m(r)}catch(e){console.error("Failed to load dashboard data:",e),ge.error(w("error.load_dashboard",{defaultValue:"Could not load dashboard data. Please check the console."}))}finally{d(!1)}},[u,p]);a.useEffect(()=>{_()},[_]),a.useEffect(()=>{const e=setInterval(()=>{_()},15e3);return()=>clearInterval(e)},[_]);const k=e=>{v(e),b(!0)},S=async e=>{try{await _e(e,"Completed"),ge.success(w("toast.request_completed",{defaultValue:"Request marked as completed!"})),_()}catch(t){ge.error(w("error.update_status_failed",{defaultValue:"Failed to update status."}))}};return x.jsxs(x.Fragment,{children:[x.jsx(Ie,{isOpen:f,onClose:()=>{b(!1),v(null)},requestId:j,contacts:s,users:n,onAssignmentSuccess:_}),x.jsx(Pe,{isOpen:y,onClose:()=>N(!1),contacts:s,onSuccess:_}),x.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[x.jsxs("div",{className:"ios-card",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsxs("div",{className:"flex items-center gap-6",children:[x.jsx("div",{className:"ios-header-brand flex items-center justify-center w-16 h-16",children:x.jsx("i",{className:"fas fa-tachometer-alt text-white text-2xl"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-bold text-theme-text mb-2",children:w("dashboard.admin")}),x.jsx("p",{className:"text-theme-text-secondary text-lg font-medium",children:"Administrative Dashboard"})]})]}),x.jsxs("button",{onClick:()=>N(!0),className:"ios-button ios-button-primary px-8 py-4 text-lg font-semibold",children:[x.jsx("i",{className:"fas fa-plus mr-3 text-lg"}),x.jsx("span",{children:w("dashboard.new_request")})]})]}),c&&x.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[x.jsx("div",{className:"ios-card p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-xl font-semibold text-theme-text",children:c.totalRequests}),x.jsx("div",{className:"text-sm text-theme-text-tertiary",children:w("dashboard.total")})]}),x.jsx("i",{className:"fas fa-chart-bar text-ios-primary text-lg"})]})}),x.jsx("div",{className:"ios-card p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-xl font-semibold text-ios-warning",children:c.submitted}),x.jsx("div",{className:"text-sm text-theme-text-tertiary",children:w("dashboard.pending")})]}),x.jsx("i",{className:"fas fa-clock text-ios-warning text-lg"})]})}),x.jsx("div",{className:"ios-card p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-xl font-semibold text-ios-primary",children:c.inProgress}),x.jsx("div",{className:"text-sm text-theme-text-tertiary",children:w("dashboard.in_progress")})]}),x.jsx("i",{className:"fas fa-spinner text-ios-primary text-lg"})]})}),x.jsx("div",{className:"ios-card p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-xl font-semibold text-ios-success",children:c.completed}),x.jsx("div",{className:"text-sm text-theme-text-tertiary",children:w("dashboard.completed")})]}),x.jsx("i",{className:"fas fa-check-circle text-ios-success text-lg"})]})})]})]}),x.jsx("div",{className:"ios-card p-4",children:x.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-filter text-ios-primary text-sm"}),x.jsx("span",{className:"text-theme-text font-medium",children:"Filters"})]}),x.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[x.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"ios-input px-3 py-2 text-sm",children:[x.jsx("option",{value:"",children:w("dashboard.filters.all")}),x.jsx("option",{value:"Submitted",children:w("dashboard.filters.submitted")}),x.jsx("option",{value:"In Progress",children:w("dashboard.filters.in_progress")}),x.jsx("option",{value:"Completed",children:w("dashboard.filters.completed")})]}),x.jsxs("div",{className:"relative flex-1 max-w-md",children:[x.jsx("input",{value:p,onChange:e=>g(e.target.value),placeholder:w("dashboard.search_ph"),className:"ios-input pl-9"}),x.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:x.jsx("i",{className:"fas fa-search text-theme-text-tertiary text-sm"})})]})]})]})}),x.jsx("div",{className:"ios-card overflow-hidden",children:l?x.jsxs("div",{className:"text-center py-20",children:[x.jsx("div",{className:"ios-loading mx-auto mb-4"}),x.jsx("h3",{className:"text-xl font-semibold text-theme-text mb-2",children:w("dashboard.loading")}),x.jsx("p",{className:"text-theme-text-secondary",children:"Fetching latest data..."})]}):x.jsx("div",{className:"p-6",children:e.length>0?x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>x.jsx("div",{className:"fade-in-up",style:{animationDelay:100*t+"ms"},children:x.jsx(Re,{request:e,onAssign:k,onResolve:S})},e.id))}):x.jsx("div",{className:"text-center py-20",children:x.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[x.jsx("div",{className:"w-24 h-24 mx-auto bg-theme-surface rounded-2xl flex items-center justify-center border border-theme-border",children:x.jsx("i",{className:"fas fa-clipboard-list text-3xl text-theme-text-tertiary"})}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("h3",{className:"text-2xl font-bold text-theme-text",children:w("dashboard.empty.title")}),x.jsx("p",{className:"text-theme-text-secondary text-lg",children:w("dashboard.empty.body")})]}),x.jsxs("button",{onClick:()=>N(!0),className:"ios-button ios-button-primary py-4 px-8",children:[x.jsx("i",{className:"fas fa-plus mr-2"}),w("dashboard.empty.cta")]})]})})})})]}),x.jsx($e,{})]})}function Te({isOpen:e,onClose:t,onSave:s,initialData:i}){const[n,o]=a.useState(""),[l,d]=a.useState(""),[c,m]=a.useState(""),[u,h]=a.useState("mechanic"),p=Boolean(i),{t:g}=r();a.useEffect(()=>{p?(o(i.name),d(i.phone),m(i.email),h(i.role)):(o(""),d(""),m(""),h("mechanic"))},[e,i,p]);return e?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:x.jsxs("div",{className:"glass-effect rounded-lg p-6 shadow-2xl transform transition-all max-w-md w-full mx-4",children:[x.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:p?g("operator.edit",{defaultValue:"Edit Operator"}):g("operator.add",{defaultValue:"Add New Operator"})}),x.jsxs("form",{onSubmit:e=>{e.preventDefault(),s({name:n,phone:l,email:c,role:u})},className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1",children:g("common.name",{defaultValue:"Name"})}),x.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),required:!0,className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1",children:g("common.phone",{defaultValue:"Phone"})}),x.jsx("input",{type:"tel",value:l,onChange:e=>d(e.target.value),required:!0,className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1",children:g("auth.email")}),x.jsx("input",{type:"email",value:c,onChange:e=>m(e.target.value),required:!0,className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50"})]}),x.jsxs("div",{className:"flex gap-3 pt-4",children:[x.jsx("button",{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:g("common.save",{defaultValue:"Save"})}),x.jsx("button",{type:"button",onClick:t,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:g("modal.cancel")})]})]})]})}):null}function ze(){const[e,t]=a.useState([]),[s,r]=a.useState([]),[i,n]=a.useState([]),[o,l]=a.useState(!0),[d,c]=a.useState("operators"),[m,u]=a.useState(!1),[h,p]=a.useState(null),[g,f]=a.useState(""),[b,j]=a.useState(""),[v,y]=a.useState(!1),[N,w]=a.useState(null),[_,k]=a.useState(!1),{user:S}=je(),C=a.useCallback(async()=>{l(!0);try{const[e,s,a]=await Promise.all([Ne(),ye({status:g||void 0,q:b||void 0,limit:100}),we()]);t(e),r(s),n(a)}catch(e){ge.error("Could not load dashboard data.")}finally{l(!1)}},[g,b]);a.useEffect(()=>{C()},[C]);const q=(e=null)=>{p(e),u(!0)},A=()=>{p(null),u(!1)},I=async e=>{if(window.confirm("Are you sure you want to delete this operator?"))try{await ge.promise(function(e){return ve(`/api/contacts/${e}`,{method:"DELETE"})}(e),{loading:"Deleting operator...",success:"Operator deleted.",error:"Failed to delete operator."}),C()}catch(t){console.error(t)}},P=async(e,t)=>{if(S?.id===e&&("inactive"===t||"denied"===t))return void ge.error("You cannot deactivate or delete your own superadmin account.");const s=function(e,t){return ve(`/api/users/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})})}(e,t);try{await ge.promise(s,{loading:"Updating user status...",success:e=>e.message,error:e=>e.message}),C()}catch(a){console.error(a)}},E=e=>{w(e),y(!0)},O=async e=>{try{await _e(e,"Completed"),ge.success("Request marked as completed!"),C()}catch(t){ge.error("Failed to update status.")}},D=async e=>{if(window.confirm("Are you sure you want to permanently delete this request?"))try{await ge.promise(function(e){return ve(`/api/requests/${e}`,{method:"DELETE"})}(e),{loading:"Deleting request...",success:"Request deleted.",error:"Failed to delete request."}),C()}catch(t){console.error(t)}},R=e=>{switch(e){case"active":return"bg-green-500/20 text-green-300";case"inactive":return"bg-gray-500/20 text-gray-300";case"pending":return"bg-yellow-500/20 text-yellow-300";default:return"bg-red-500/20 text-red-300"}},$=i.filter(e=>"pending"===e.status),L=i.filter(e=>"pending"!==e.status);return x.jsxs(x.Fragment,{children:[x.jsx(Ie,{isOpen:v,onClose:()=>{y(!1),w(null)},requestId:N,contacts:e,users:i,onAssignmentSuccess:C}),x.jsx(Pe,{isOpen:_,onClose:()=>k(!1),contacts:e,onSuccess:C}),x.jsx(Te,{isOpen:m,onClose:A,onSave:async e=>{const t=h?function(e,t){return ve(`/api/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)})}(h.id,e):function(e){return ve("/api/contacts",{method:"POST",body:JSON.stringify(e)})}(e);try{await ge.promise(t,{loading:"Saving operator...",success:"Operator saved successfully!",error:"Failed to save operator."}),A(),C()}catch(s){console.error(s)}},initialData:h}),x.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[x.jsxs("div",{className:"ios-card p-8",children:[x.jsxs("div",{className:"flex items-center gap-8 mb-10",children:[x.jsx("div",{className:"ios-header-brand flex items-center justify-center w-24 h-24",children:x.jsx("i",{className:"fas fa-crown text-white text-4xl"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-5xl font-bold text-theme-text mb-3",children:"Super Admin Console"}),x.jsx("p",{className:"text-theme-text-secondary text-xl font-medium uppercase tracking-wider",children:"Complete Platform Control"})]})]}),x.jsx("div",{className:"flex justify-center",children:x.jsx("div",{className:"bg-theme-surface rounded-3xl p-2 border border-theme-border",children:x.jsxs("div",{className:"flex",children:[x.jsxs("button",{onClick:()=>c("operators"),className:"relative px-8 py-4 rounded-2xl font-semibold transition-all duration-300 flex items-center gap-3 "+("operators"===d?"bg-ios-primary text-white":"text-theme-text-secondary hover:text-theme-text hover:bg-theme-surface"),children:[x.jsx("i",{className:"fas fa-users-cog"}),x.jsx("span",{children:"Operators"})]}),x.jsxs("button",{onClick:()=>c("requests"),className:"relative px-8 py-4 rounded-2xl font-semibold transition-all duration-300 flex items-center gap-3 "+("requests"===d?"bg-ios-success text-white":"text-theme-text-secondary hover:text-theme-text hover:bg-theme-surface"),children:[x.jsx("i",{className:"fas fa-tasks"}),x.jsx("span",{children:"Requests"})]}),x.jsxs("button",{onClick:()=>c("users"),className:"relative px-8 py-4 rounded-2xl font-semibold transition-all duration-300 flex items-center gap-3 "+("users"===d?"bg-ios-secondary text-white":"text-theme-text-secondary hover:text-theme-text hover:bg-theme-surface"),children:[x.jsx("i",{className:"fas fa-user-shield"}),x.jsx("span",{children:"User Management"})]})]})})})]}),x.jsx("div",{className:"ios-card overflow-hidden",children:o?x.jsxs("div",{className:"text-center py-20",children:[x.jsx("div",{className:"ios-loading mx-auto mb-4"}),x.jsx("h3",{className:"text-xl font-semibold text-theme-text mb-2",children:"Loading Super Admin Console"}),x.jsx("p",{className:"text-theme-text-secondary",children:"Initializing system..."})]}):x.jsxs("div",{className:"p-8",children:["operators"===d&&x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-xl flex items-center justify-center",children:x.jsx("i",{className:"fas fa-users-cog text-neon-blue text-xl"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold font-space text-white",children:"Operator Management"}),x.jsx("p",{className:"text-pro-light text-sm uppercase tracking-wider",children:"Manage Assessment Team"})]})]}),x.jsxs("button",{onClick:()=>q(),className:"pro-button py-3 px-6 text-white font-semibold rounded-2xl hover-lift group flex items-center gap-3",children:[x.jsx("i",{className:"fas fa-plus group-hover:scale-110 transition-transform duration-300"}),x.jsx("span",{children:"Add Operator"})]})]}),x.jsx("div",{className:"grid gap-6",children:e.map((e,t)=>x.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-white/5 hover-lift card-enter",style:{animationDelay:100*t+"ms"},children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-neon-blue/20 to-neon-green/20 rounded-2xl flex items-center justify-center border border-white/10",children:x.jsx("i",{className:"fas fa-user-cog text-neon-blue text-xl"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-lg text-white mb-1",children:e.name}),x.jsxs("div",{className:"flex items-center gap-4 text-sm text-pro-light",children:[x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-phone text-xs"}),e.phone]}),x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-envelope text-xs"}),e.email]})]})]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsxs("button",{onClick:()=>q(e),className:"px-4 py-2 bg-neon-blue/20 text-neon-blue border border-neon-blue/30 rounded-xl text-sm font-medium hover:bg-neon-blue/30 transition-all duration-300",children:[x.jsx("i",{className:"fas fa-edit mr-2"}),"Edit"]}),x.jsxs("button",{onClick:()=>I(e.id),className:"px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/30 rounded-xl text-sm font-medium hover:bg-red-500/30 transition-all duration-300",children:[x.jsx("i",{className:"fas fa-trash mr-2"}),"Delete"]})]})]})},e.id))})]}),"requests"===d&&x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-xl flex items-center justify-center",children:x.jsx("i",{className:"fas fa-tasks text-neon-green text-xl"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold font-space text-white",children:"Request Management"}),x.jsx("p",{className:"text-pro-light text-sm uppercase tracking-wider",children:"Full Request Control"})]})]}),x.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-white/5",children:x.jsxs("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[x.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("i",{className:"fas fa-filter text-neon-green text-sm"}),x.jsx("label",{className:"text-xs font-semibold text-pro-light uppercase tracking-wider",children:"Filters"})]}),x.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"glass-ultra border border-white/10 rounded-xl px-4 py-2 text-white text-sm font-medium focus:border-neon-green/50 focus:outline-none min-w-[140px]",children:[x.jsx("option",{value:"",children:"All Status"}),x.jsx("option",{value:"Submitted",children:"Submitted"}),x.jsx("option",{value:"In Progress",children:"In Progress"}),x.jsx("option",{value:"Completed",children:"Completed"})]}),x.jsxs("div",{className:"relative flex-1 max-w-sm",children:[x.jsx("input",{value:b,onChange:e=>j(e.target.value),placeholder:"Search requests...",className:"w-full glass-ultra border border-white/10 rounded-xl px-4 py-2 pl-10 text-white placeholder-pro-light/60 focus:border-neon-blue/50 focus:outline-none text-sm font-medium"}),x.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:x.jsx("i",{className:"fas fa-search text-pro-light/40 text-xs"})})]})]}),x.jsxs("button",{onClick:()=>k(!0),className:"pro-button py-3 px-6 text-white font-semibold rounded-2xl hover-lift group flex items-center gap-3",children:[x.jsx("i",{className:"fas fa-plus group-hover:scale-110 transition-transform duration-300"}),x.jsx("span",{children:"New Request"})]})]})}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((e,t)=>x.jsx("div",{className:"card-enter",style:{animationDelay:100*t+"ms"},children:x.jsx(Re,{request:e,onAssign:E,onResolve:O,onDelete:D})},e.id))})]}),"users"===d&&x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-purple/20 to-neon-pink/20 rounded-xl flex items-center justify-center",children:x.jsx("i",{className:"fas fa-user-shield text-neon-purple text-xl"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold font-space text-white",children:"User Management"}),x.jsx("p",{className:"text-pro-light text-sm uppercase tracking-wider",children:"Platform Access Control"})]})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-neon-yellow/20 to-neon-yellow/10 rounded-lg flex items-center justify-center",children:x.jsx("i",{className:"fas fa-hourglass-half text-neon-yellow text-sm"})}),x.jsxs("h3",{className:"text-xl font-bold text-neon-yellow",children:["Pending Approval (",$.length,")"]})]}),$.length>0?x.jsx("div",{className:"grid gap-4",children:$.map((e,t)=>x.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-neon-yellow/20 hover-lift card-enter",style:{animationDelay:100*t+"ms"},children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-yellow/20 to-neon-purple/20 rounded-xl flex items-center justify-center border border-white/10",children:x.jsx("i",{className:"fas fa-user-clock text-neon-yellow text-lg"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-lg text-white mb-1",children:e.username}),x.jsxs("p",{className:"text-sm text-pro-light flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-envelope text-xs"}),e.email]})]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("button",{onClick:()=>P(e.id,"active"),className:"px-6 py-3 bg-neon-green/20 text-neon-green border border-neon-green/30 rounded-xl font-semibold hover:bg-neon-green/30 transition-all duration-300 flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-check"}),"Approve"]}),x.jsxs("button",{onClick:()=>P(e.id,"denied"),className:"px-6 py-3 bg-red-500/20 text-red-400 border border-red-500/30 rounded-xl font-semibold hover:bg-red-500/30 transition-all duration-300 flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-times"}),"Deny"]})]})]})},e.id))}):x.jsxs("div",{className:"glass-ultra p-8 rounded-2xl border border-white/5 text-center",children:[x.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-2xl flex items-center justify-center mb-4",children:x.jsx("i",{className:"fas fa-check-circle text-neon-green text-2xl"})}),x.jsx("p",{className:"text-pro-light text-lg",children:"No users are currently pending approval."})]})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-lg flex items-center justify-center",children:x.jsx("i",{className:"fas fa-users text-neon-blue text-sm"})}),x.jsxs("h3",{className:"text-xl font-bold text-white",children:["Active & Inactive Users (",L.length,")"]})]}),x.jsx("div",{className:"grid gap-4",children:L.map((e,t)=>x.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-white/5 hover-lift card-enter",style:{animationDelay:100*t+"ms"},children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center border border-white/10 "+("active"===e.status?"bg-gradient-to-br from-neon-green/20 to-neon-blue/20":"bg-gradient-to-br from-gray-500/20 to-gray-400/20"),children:x.jsx("i",{className:`fas ${"active"===e.status?"fa-user-check":"fa-user-slash"} text-lg ${"active"===e.status?"text-neon-green":"text-gray-400"}`})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-lg text-white mb-1",children:e.username}),x.jsxs("p",{className:"text-sm text-pro-light flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-envelope text-xs"}),e.email]})]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full uppercase tracking-wider ${R(e.status||"pending")}`,children:e.status||"pending"}),S?.id!==e.id&&"active"===e.status&&x.jsxs("button",{onClick:()=>P(e.id,"inactive"),className:"px-4 py-2 bg-gray-500/20 text-gray-300 border border-gray-500/30 rounded-xl text-sm font-medium hover:bg-gray-500/30 transition-all duration-300 flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-pause"}),"Deactivate"]}),S?.id!==e.id&&"inactive"===e.status&&x.jsxs("button",{onClick:()=>P(e.id,"active"),className:"px-4 py-2 bg-neon-blue/20 text-neon-blue border border-neon-blue/30 rounded-xl text-sm font-medium hover:bg-neon-blue/30 transition-all duration-300 flex items-center gap-2",children:[x.jsx("i",{className:"fas fa-play"}),"Reactivate"]})]})]})},e.id))})]})]})]})})]}),x.jsx("div",{className:"mt-8",children:x.jsx($e,{})})]})}function Fe({setView:e}){const{login:t}=je(),{t:s}=r();return x.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:x.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 lg:grid-cols-2 gap-8",children:[x.jsxs("div",{className:"hidden lg:flex flex-col justify-between ios-card p-8",children:[x.jsxs("div",{className:"space-y-8",children:[x.jsx("div",{className:"ios-header-brand flex items-center justify-center w-20 h-20",children:x.jsx("i",{className:"fas fa-car-crash text-white text-3xl"})}),x.jsxs("div",{className:"space-y-6",children:[x.jsx("h1",{className:"text-5xl font-bold text-theme-text leading-tight",children:s("brand")}),x.jsx("p",{className:"text-xl text-theme-text-secondary leading-relaxed font-medium",children:s("tagline")})]})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center gap-3 p-4 bg-theme-surface rounded-xl",children:[x.jsx("div",{className:"w-10 h-10 bg-ios-warning/20 rounded-lg flex items-center justify-center",children:x.jsx("i",{className:"fas fa-bolt text-ios-warning text-lg"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-theme-text font-semibold mb-1",children:"Real-time Operations"}),x.jsx("p",{className:"text-theme-text-secondary text-sm",children:"Advanced monitoring and instant response capabilities"})]})]}),x.jsxs("div",{className:"flex items-center gap-3 p-4 bg-theme-surface rounded-xl",children:[x.jsx("div",{className:"w-10 h-10 bg-ios-success/20 rounded-lg flex items-center justify-center",children:x.jsx("i",{className:"fas fa-shield-alt text-ios-success text-lg"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-theme-text font-semibold mb-1",children:"Enterprise Security"}),x.jsx("p",{className:"text-theme-text-secondary text-sm",children:"Military-grade encryption with role-based access control"})]})]}),x.jsxs("div",{className:"flex items-center gap-3 p-4 bg-theme-surface rounded-xl",children:[x.jsx("div",{className:"w-10 h-10 bg-ios-primary/20 rounded-lg flex items-center justify-center",children:x.jsx("i",{className:"fas fa-analytics text-ios-primary text-lg"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-theme-text font-semibold mb-1",children:"Advanced Analytics"}),x.jsx("p",{className:"text-theme-text-secondary text-sm",children:"AI-powered insights and predictive maintenance"})]})]})]})]}),x.jsxs("div",{className:"ios-card p-8 space-y-6",children:[x.jsxs("div",{className:"text-center space-y-6",children:[x.jsx("div",{className:"ios-header-brand flex items-center justify-center w-20 h-20 mx-auto",children:x.jsx("i",{className:"fas fa-user-circle text-white text-3xl"})}),x.jsx("h2",{className:"text-4xl font-bold text-theme-text",children:s("auth.welcome")}),x.jsx("p",{className:"text-theme-text-secondary text-xl font-medium",children:s("auth.signin_sub")})]}),x.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a={email:e.target.email.value,password:e.target.password.value};try{const e=await ge.promise(function(e){return ve("/api/login",{method:"POST",body:JSON.stringify(e)})}(a),{loading:s("auth.signin"),success:s("auth.signin"),error:e=>e.message||"Invalid credentials."});e.token&&t(e.token)}catch(r){console.error(r)}},className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-semibold text-theme-text uppercase tracking-wider",children:s("auth.email")}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"email",name:"email",placeholder:s("auth.email_ph"),required:!0,className:"ios-input"}),x.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:x.jsx("i",{className:"fas fa-envelope text-theme-text-tertiary"})})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-semibold text-theme-text uppercase tracking-wider",children:s("auth.password")}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"password",name:"password",placeholder:s("auth.password_ph"),required:!0,className:"ios-input"}),x.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:x.jsx("i",{className:"fas fa-lock text-theme-text-tertiary"})})]})]}),x.jsxs("button",{type:"submit",className:"w-full ios-button ios-button-primary py-4 text-lg",children:[x.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),s("auth.signin")]})]}),x.jsx("div",{className:"text-center pt-4",children:x.jsxs("p",{className:"text-theme-text-secondary",children:[s("auth.no_account")," ",x.jsx("button",{type:"button",onClick:()=>e("register"),className:"text-ios-primary font-bold hover:text-ios-secondary transition-colors duration-300 focus:outline-none",children:s("auth.register_here")})]})}),x.jsx("div",{className:"text-center pt-4 border-t border-theme-border",children:x.jsx("p",{className:"text-theme-text-tertiary text-sm font-medium",children:s("auth.demo")})})]})]})})}function Ue({setView:e}){const{themeConfig:t,isDark:s}=qe(),{t:a}=r();return x.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 relative overflow-hidden",children:[x.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[x.jsx("div",{className:"absolute top-1/3 right-1/4 w-80 h-80 bg-neon-green/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-96 h-96 bg-neon-blue/10 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),x.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[700px] h-[700px] bg-neon-purple/5 rounded-full blur-3xl animate-pulse-slow"})]}),x.jsxs("div",{className:"w-full max-w-7xl grid grid-cols-1 lg:grid-cols-2 gap-12 relative z-10",children:[x.jsxs("div",{className:"hidden lg:flex flex-col justify-between glass-morphism rounded-4xl p-12 border border-white/10 shadow-glass-lg hover-lift",children:[x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"relative inline-block group",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-neon-green via-neon-blue to-neon-purple rounded-full blur-2xl opacity-60 group-hover:opacity-80 transition-opacity duration-500 animate-gradient-x"}),x.jsxs("div",{className:"relative bg-gradient-to-br from-neon-green/30 to-neon-blue/30 p-6 rounded-3xl backdrop-blur-xl border border-white/20 group-hover:scale-110 transition-transform duration-500",children:[x.jsx("i",{className:"fas fa-user-plus text-white text-4xl drop-shadow-2xl"}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-3xl blur-xl"})]})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("h1",{className:"text-5xl font-bold font-space heading-gradient leading-tight tracking-tight",children:a("register.title")}),x.jsx("p",{className:"text-xl text-pro-light font-medium leading-relaxed",children:a("register.subtitle")})]})]}),x.jsxs("div",{className:"space-y-6 mt-12",children:[x.jsxs("div",{className:"flex items-center gap-4 p-6 glass-ultra rounded-2xl border border-white/5 group hover:border-neon-green/30 transition-all duration-300",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:x.jsx("i",{className:"fas fa-user-shield text-neon-green text-xl"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-white font-semibold mb-1",children:"Secure Approval Process"}),x.jsx("p",{className:"text-pro-light text-sm",children:"All accounts require verification to ensure platform security"})]})]}),x.jsxs("div",{className:"flex items-center gap-4 p-6 glass-ultra rounded-2xl border border-white/5 group hover:border-neon-pink/30 transition-all duration-300",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-pink/20 to-neon-purple/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:x.jsx("i",{className:"fas fa-headset text-neon-pink text-xl"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-white font-semibold mb-1",children:"24/7 Support Access"}),x.jsx("p",{className:"text-pro-light text-sm",children:"Round-the-clock assistance tools once your account is activated"})]})]}),x.jsxs("div",{className:"flex items-center gap-4 p-6 glass-ultra rounded-2xl border border-white/5 group hover:border-neon-blue/30 transition-all duration-300",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:x.jsx("i",{className:"fas fa-rocket text-neon-blue text-xl"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-white font-semibold mb-1",children:"Instant Deployment"}),x.jsx("p",{className:"text-pro-light text-sm",children:"Get started immediately after account approval"})]})]})]})]}),x.jsxs("div",{className:"glass-morphism p-12 rounded-4xl border border-white/10 shadow-glass-lg space-y-8 card-enter",children:[x.jsxs("div",{className:"text-center space-y-4",children:[x.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-2xl flex items-center justify-center mb-6 border border-white/10",children:x.jsx("i",{className:"fas fa-user-plus text-2xl text-white"})}),x.jsx("h2",{className:"text-3xl font-bold font-space text-white",children:a("register.create_title")}),x.jsx("p",{className:"text-pro-light text-lg",children:a("register.pending_info")})]}),x.jsxs("form",{onSubmit:async t=>{t.preventDefault();const s=t.target,r={username:s.username.value,email:s.email.value,password:s.password.value};if(r.password.length<6)ge.error(a("register.min_chars"));else try{const t=function(e){return ve("/api/register",{method:"POST",body:JSON.stringify(e)})}(r);await ge.promise(t,{loading:a("register.create"),success:t=>(e("login"),t.message),error:e=>e.message||a("error.registration_failed",{defaultValue:"Registration failed. Please try again."})})}catch(i){console.error("Registration submission failed:",i)}},className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-semibold text-pro-light uppercase tracking-wider",children:a("register.username")}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",name:"username",placeholder:a("register.username_ph"),required:!0,className:"w-full glass-ultra border border-white/10 rounded-2xl px-6 py-4 text-white placeholder-pro-light/60 focus:border-neon-green/50 focus:outline-none focus:ring-2 focus:ring-neon-green/20 transition-all duration-300 font-medium"}),x.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:x.jsx("i",{className:"fas fa-user text-pro-light/40"})})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-semibold text-pro-light uppercase tracking-wider",children:a("auth.email")}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"email",name:"email",placeholder:a("auth.email_ph"),required:!0,className:"w-full glass-ultra border border-white/10 rounded-2xl px-6 py-4 text-white placeholder-pro-light/60 focus:border-neon-blue/50 focus:outline-none focus:ring-2 focus:ring-neon-blue/20 transition-all duration-300 font-medium"}),x.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:x.jsx("i",{className:"fas fa-envelope text-pro-light/40"})})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-semibold text-pro-light uppercase tracking-wider",children:a("auth.password")}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"password",name:"password",placeholder:a("register.password_ph"),required:!0,className:"w-full glass-ultra border border-white/10 rounded-2xl px-6 py-4 text-white placeholder-pro-light/60 focus:border-neon-purple/50 focus:outline-none focus:ring-2 focus:ring-neon-purple/20 transition-all duration-300 font-medium"}),x.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:x.jsx("i",{className:"fas fa-lock text-pro-light/40"})})]}),x.jsx("p",{className:"text-pro-light/70 text-xs mt-2 font-medium",children:a("register.min_chars")})]}),x.jsx("button",{type:"submit",className:"w-full pro-button py-5 px-8 text-white font-bold text-lg rounded-2xl hover-lift group relative overflow-hidden",children:x.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-3",children:[x.jsx("i",{className:"fas fa-user-plus group-hover:scale-110 transition-transform duration-300"}),a("register.create")]})})]}),x.jsx("div",{className:"text-center pt-4",children:x.jsxs("p",{className:"text-pro-light",children:[a("register.have_account")," ",x.jsx("button",{type:"button",onClick:()=>e("login"),className:"text-neon-green font-bold hover:text-neon-blue transition-colors duration-300 focus:outline-none group",children:x.jsx("span",{className:"border-b border-transparent group-hover:border-neon-blue transition-all duration-300",children:a("register.signin_here")})})]})}),x.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-neon-blue/20 bg-gradient-to-r from-neon-blue/5 to-neon-purple/5",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-xl flex items-center justify-center flex-shrink-0 mt-1",children:x.jsx("i",{className:"fas fa-info-circle text-neon-blue text-lg"})}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("h3",{className:"text-neon-blue font-bold text-sm uppercase tracking-wider",children:a("register.approval.title")}),x.jsx("p",{className:"text-pro-light text-sm leading-relaxed",children:a("register.approval.body")})]})]})})]})]})]})}function Me({label:e,onRemove:t}){return x.jsxs("span",{className:"inline-flex items-center gap-1 bg-white/10 border border-white/20 text-white text-xs font-medium px-2 py-1 rounded-full",children:[e,x.jsx("button",{type:"button",onClick:t,className:"opacity-80 hover:opacity-100",children:x.jsx("i",{className:"fas fa-times text-[10px]"})})]})}const Ve=["$20 - $40/hr","$40 - $80/hr","$80 - $120/hr","$120 - $200/hr"];function Ye({onClose:e}){const{themeConfig:t}=qe(),{t:s}=r(),[i,n]=a.useState(1),[o,l]=a.useState(""),[d,c]=a.useState([]),[m,u]=a.useState(""),[h,p]=a.useState(""),[g,f]=a.useState(""),[b,j]=a.useState(["",""]),v=a.useMemo(()=>d.length<3&&m.trim().length>0,[d,m]),y=()=>{v&&(c(e=>Array.from(new Set([...e,m.trim()]))),u(""))};return a.useEffect(()=>{const e=localStorage.getItem("onboarding.profile");if(e)try{const t=JSON.parse(e);l(t.oneLiner||""),c(Array.isArray(t.skills)?t.skills.slice(0,3):[]),p(t.hourly||""),j(Array.isArray(t.links)?t.links.slice(0,2):["",""]),f(t.photoPreview||"")}catch{}},[]),x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[x.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),x.jsxs("div",{className:"relative w-full max-w-5xl grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsxs("div",{className:`elevated-card bg-gradient-to-br ${t.cardBg} border p-6 md:p-10`,children:[1===i&&x.jsxs("div",{children:[x.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/70 mb-2",children:[s("onboarding.step")," 1/2"]}),x.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:s("onboarding.build_profile")}),x.jsx("label",{className:"block text-sm text-white/80 mb-2",children:s("onboarding.one_liner")}),x.jsx("textarea",{rows:3,value:o,onChange:e=>l(e.target.value.slice(0,60)),placeholder:s("onboarding.one_liner_ph"),className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/60 mb-6"}),x.jsx("label",{className:"block text-sm text-white/80 mb-2",children:s("onboarding.skills")}),x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("input",{value:m,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key?(e.preventDefault(),y()):null,placeholder:s("onboarding.skill_ph"),className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/60"}),x.jsx("button",{type:"button",disabled:!v,onClick:y,className:"px-3 py-2 rounded-lg text-sm text-white "+(v?"bg-orange-600 hover:bg-orange-700":"bg-white/10"),children:s("onboarding.add")})]}),x.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.map(e=>x.jsx(Me,{label:e,onRemove:()=>c(t=>t.filter(t=>t!==e))},e)),0===d.length&&x.jsx("span",{className:"text-white/50 text-xs",children:s("onboarding.up_to_three")})]}),x.jsx("label",{className:"block text-sm text-white/80 mb-2",children:s("onboarding.rate")}),x.jsx("div",{className:"mb-6",children:x.jsxs("select",{value:h,onChange:e=>p(e.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-3 text-white",children:[x.jsx("option",{value:"",className:"bg-slate-900",children:s("onboarding.select_rate")}),Ve.map(e=>x.jsx("option",{className:"bg-slate-900",value:e,children:e},e))]})}),x.jsx("label",{className:"block text-sm text-white/80 mb-2",children:s("onboarding.photo")}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-white/10 border border-white/20 flex items-center justify-center",children:g?x.jsx("img",{src:g,alt:"preview",className:"w-full h-full object-cover"}):x.jsx("i",{className:"fas fa-user text-white/40"})}),x.jsxs("label",{className:"cursor-pointer bg-white/10 hover:bg-white/20 text-white text-sm px-3 py-2 rounded-lg border border-white/20",children:[x.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{const t=e.target.files&&e.target.files[0];if(!t)return;const s=new FileReader;s.onload=e=>f(String(e.target?.result||"")),s.readAsDataURL(t)}}),s("onboarding.upload_photo")]})]}),x.jsx("div",{className:"flex justify-end gap-3 mt-10",children:x.jsx("button",{type:"button",onClick:()=>n(e=>Math.min(2,e+1)),className:"px-5 py-2.5 rounded-lg text-white bg-gradient-to-r from-orange-600 to-rose-600 hover:from-orange-700 hover:to-rose-700 shadow-lg",children:s("onboarding.continue")})})]}),2===i&&x.jsxs("div",{children:[x.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/70 mb-2",children:[s("onboarding.step")," 2/2"]}),x.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:s("onboarding.add_links")}),x.jsx("div",{className:"space-y-4",children:[0,1].map(e=>x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-white/80 mb-2",children:s(0===e?"onboarding.link_1":"onboarding.link_2")}),x.jsx("input",{type:"url",placeholder:s("onboarding.link_ph"),value:b[e],onChange:t=>j(s=>s.map((s,a)=>a===e?t.target.value:s)),className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/60"})]},e))}),x.jsxs("div",{className:"flex justify-between mt-10",children:[x.jsx("button",{type:"button",onClick:()=>n(e=>Math.max(1,e-1)),className:"px-5 py-2.5 rounded-lg text-white/80 bg-white/10 hover:bg-white/20 border border-white/20",children:s("onboarding.back")}),x.jsx("button",{type:"button",onClick:()=>{try{const e={oneLiner:o,skills:d,hourly:h,links:b,photoPreview:g,completedAt:Date.now()};localStorage.setItem("onboarding.profile",JSON.stringify(e)),localStorage.setItem("onboardingCompleted","true")}catch{}e?.()},className:"px-5 py-2.5 rounded-lg text-white bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 shadow-lg",children:s("onboarding.complete")})]})]})]}),x.jsx("div",{className:`elevated-card bg-gradient-to-br ${t.cardBg} border p-6 md:p-10 flex items-center`,children:x.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[x.jsx("div",{className:"mx-auto w-28 h-28 rounded-full overflow-hidden bg-white/10 border border-white/20 flex items-center justify-center mb-4",children:g?x.jsx("img",{src:g,alt:"preview",className:"w-full h-full object-cover"}):x.jsx("i",{className:"fas fa-user text-white/40 text-3xl"})}),x.jsx("h3",{className:"text-2xl font-semibold text-white text-center mb-2",children:s("onboarding.preview_name")}),x.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mb-4",children:[d.map(e=>x.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-white/10 border border-white/20 text-white/90",children:e},e)),h&&x.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30",children:h})]}),x.jsx("div",{className:"text-center text-white/80 text-sm min-h-[40px] mb-6",children:o||s("onboarding.preview_oneliner")}),x.jsx("div",{className:"space-y-3",children:b.filter(Boolean).map((e,t)=>x.jsx("a",{target:"_blank",rel:"noreferrer",href:e,className:"block w-full text-center px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white/90 hover:bg-white/20 truncate",children:e},t))})]})})]})]})}function Be(){const{user:e,logout:t}=je(),{t:s}=r();return x.jsxs("div",{className:"min-h-screen bg-theme-bg",children:[x.jsx(Ae,{}),x.jsxs("button",{onClick:t,className:"ios-logout-button",children:[x.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),x.jsx("span",{className:"hidden sm:block",children:s("auth.logout")})]}),x.jsx("main",{className:"container mx-auto px-6 py-8 max-w-7xl",children:x.jsx("div",{className:"fade-in-up",children:(()=>{switch(e?.role){case"super_admin":return x.jsx(ze,{});case"admin":return x.jsx(Le,{});default:return x.jsxs("div",{className:"ios-card max-w-2xl mx-auto mt-20 text-center",children:[x.jsx("div",{className:"w-20 h-20 mx-auto bg-ios-primary rounded-full flex items-center justify-center mb-6",children:x.jsx("i",{className:"fas fa-user-shield text-white text-2xl"})}),x.jsx("h2",{className:"text-2xl font-bold text-theme-text mb-4",children:s("auth.welcome",{defaultValue:"Welcome!"})}),x.jsx("p",{className:"text-theme-text-secondary text-lg",children:s("auth.no_admin_privileges",{defaultValue:"You do not have admin privileges for this platform."})})]})}})()})})]})}function Je(){const{user:e}=je(),[t,s]=a.useState("login"),[r,i]=a.useState(()=>{try{return e&&"true"!==localStorage.getItem("onboardingCompleted")}catch{return!1}});return x.jsxs("div",{className:"ios-bg min-h-screen",children:[x.jsx(pe,{position:"top-center",toastOptions:{style:{background:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"12px"}}}),x.jsx("div",{className:"flex-1",children:e?x.jsx(Be,{}):"register"===t?x.jsx(Ue,{setView:s}):x.jsx(Fe,{setView:s})}),e&&r&&x.jsx(Ye,{onClose:()=>i(!1)})]})}const Xe={brand:"Hamza Assistance",tagline:"Professional Dispatch System","theme.switch":"Switch to {{mode}} theme","stats.total":"Total","stats.pending":"Pending","stats.active":"Active","stats.done":"Done","role.super_admin":"Super Admin","role.admin":"Admin","auth.logout":"Logout","auth.welcome":"Welcome Back","auth.signin_sub":"Sign in to access the dispatch system","auth.email":"Email Address","auth.email_ph":"Enter your email","auth.password":"Password","auth.password_ph":"Enter your password","auth.signin":"Sign In","auth.no_account":"Don't have an account?","auth.register_here":"Register here","auth.demo":"Demo: super@roadside.com / superadmin123","register.title":"Join Our Team","register.subtitle":"Create your dispatch system account","register.create_title":"Create Account","register.pending_info":"Your account will be pending approval","register.username":"Username","register.username_ph":"Choose a username","register.password_ph":"Create a strong password","register.min_chars":"Minimum 6 characters required","register.create":"Create Account","register.have_account":"Already have an account?","register.signin_here":"Sign in here","register.approval.title":"Account Approval Process","register.approval.body":"After registration, your account will be reviewed by a super administrator. You'll receive access once approved.","dashboard.admin":"Admin Dashboard","dashboard.new_request":"New Request","dashboard.total":"Total","dashboard.pending":"Pending","dashboard.in_progress":"In Progress","dashboard.completed":"Completed","dashboard.filters.all":"All Statuses","dashboard.filters.submitted":"Submitted","dashboard.filters.in_progress":"In Progress","dashboard.filters.completed":"Completed","dashboard.search_ph":"Search user info...","dashboard.loading":"Loading Requests...","dashboard.empty.title":"No requests yet","dashboard.empty.body":"Start by creating a new service request for a customer. You can add all the details, attach photos, and assign it to an operator.","dashboard.empty.cta":"Create Your First Request","user.submit_title":"Submit a Service Request","user.info_label":"Full Name, Car Model, Phone, Location","user.info_ph":"Paste your information here...","user.image_url":"Or Paste Image URL","user.or":"OR","user.upload_photo":"Upload Photo","user.upload_file":"Upload a file","user.file_hint":"PNG, JPG up to 10MB","user.send":"Send Request","request.status.submitted":"Submitted","request.status.in_progress":"In Progress","request.status.completed":"Completed","request.issue.title":"Issue Description","request.assignment.title":"Assignment Details","request.assignment.operator":"Operator:","request.assignment.assigned_by":"Assigned by:","request.actions.resolve":"Mark Resolved","request.actions.assign":"Assign","request.actions.reassign":"Reassign","request.actions.delete":"Delete Request","footer.body":"Your trusted partner for emergency roadside assistance. We provide 24/7 support to get you back on the road safely and quickly.","footer.rights":"All rights reserved.","footer.made":"Made with ❤️ by your team.","modal.assignment.title":"Assign Request","modal.assignment.select_operator":"Select Operator","modal.assignment.choose_operator":"Choose an operator...","modal.assignment.select_user":"Select User","modal.assignment.choose_user":"Choose a user...","modal.assignment.assign":"Assign","modal.assignment.assigning":"Assigning...","modal.cancel":"Cancel","modal.create_request.title":"Create Service Request","modal.customer_info":"Customer Information","modal.customer_name":"Customer Name *","modal.customer_name_ph":"Enter customer full name","modal.phone":"Phone Number *","modal.phone_ph":"+212 6XX XXX XXX","modal.location":"Location *","modal.location_ph":"Address or landmark","modal.vehicle_info":"Vehicle Information","modal.car_model":"Car Model *","modal.car_model_ph":"e.g., Toyota Corolla","modal.year":"Year","modal.urgency":"Urgency Level","modal.urgency.low":"Low","modal.urgency.medium":"Medium","modal.urgency.high":"High","modal.urgency.emergency":"Emergency","modal.issue":"Issue Description *","modal.issue_ph":"Describe the issue in detail...","modal.attach_photo":"Attach Photo (Optional)","modal.upload_device":"Upload from device","modal.click_upload":"Click to upload image","modal.preview":"Preview:","modal.or_paste_url":"Or paste image URL","modal.operator_optional":"Assign to Operator (Optional)","modal.operator_select":"Select operator...","modal.create":"Create Request","language.en":"English","language.fr":"Français","language.switcher":"Language","auth.no_admin_privileges":"Welcome! You do not have admin privileges.","error.submit_failed":"Failed to submit request. Please try again.","error.load_dashboard":"Could not load dashboard data. Please check the console.","toast.request_completed":"Request marked as completed!","error.update_status_failed":"Failed to update status.","toast.request_created":"Request created successfully!","toast.request_assigned":"Request assigned to operator!","error.assignment_partial":"Request created but assignment failed","error.create_request_failed":"Failed to create request.","error.assignment_select_both":"Please select both an operator and a user.","toast.assignment_success":"Assignment successful!","error.assignment_failed":"Assignment failed.","common.name":"Name","common.phone":"Phone","common.save":"Save","onboarding.step":"Step","onboarding.build_profile":"Build your profile","onboarding.one_liner":"One-liner","onboarding.one_liner_ph":"Web Developer building responsive and modern websites.","onboarding.skills":"Skills","onboarding.skill_ph":"Add a skill and press Enter...","onboarding.add":"Add","onboarding.up_to_three":"Add up to three skills","onboarding.rate":"Hourly rate","onboarding.select_rate":"Select your hourly rate","onboarding.photo":"Profile photo","onboarding.upload_photo":"Upload profile photo","onboarding.continue":"Continue","onboarding.add_links":"Add social links","onboarding.link_1":"Link #1","onboarding.link_2":"Link #2","onboarding.link_ph":"https://instagram.com/yourname or https://x.com/yourname","onboarding.back":"Back","onboarding.complete":"Complete","onboarding.preview_name":"Liam Basil","onboarding.preview_oneliner":"Your one-liner will appear here."},He={brand:"Hamza Assistance",tagline:"Système professionnel de dispatching","theme.switch":"Passer au thème {{mode}}","stats.total":"Total","stats.pending":"En attente","stats.active":"Actif","stats.done":"Terminé","role.super_admin":"Super Administrateur","role.admin":"Administrateur","auth.logout":"Se déconnecter","auth.welcome":"Bon retour","auth.signin_sub":"Connectez-vous pour accéder au système","auth.email":"Adresse e-mail","auth.email_ph":"Entrez votre e-mail","auth.password":"Mot de passe","auth.password_ph":"Entrez votre mot de passe","auth.signin":"Se connecter","auth.no_account":"Vous n'avez pas de compte ?","auth.register_here":"Inscrivez-vous ici","auth.demo":"Démo : super@roadside.com / superadmin123","register.title":"Rejoignez notre équipe","register.subtitle":"Créez votre compte pour le système de dispatching","register.create_title":"Créer un compte","register.pending_info":"Votre compte sera en attente d'approbation","register.username":"Nom d'utilisateur","register.username_ph":"Choisissez un nom d'utilisateur","register.password_ph":"Créez un mot de passe fort","register.min_chars":"Minimum 6 caractères requis","register.create":"Créer un compte","register.have_account":"Vous avez déjà un compte ?","register.signin_here":"Connectez-vous ici","register.approval.title":"Processus d'approbation du compte","register.approval.body":"Après l'inscription, votre compte sera examiné par un super administrateur. Vous recevrez l'accès une fois approuvé.","dashboard.admin":"Tableau de bord Admin","dashboard.new_request":"Nouvelle demande","dashboard.total":"Total","dashboard.pending":"En attente","dashboard.in_progress":"En cours","dashboard.completed":"Terminé","dashboard.filters.all":"Tous les statuts","dashboard.filters.submitted":"Soumis","dashboard.filters.in_progress":"En cours","dashboard.filters.completed":"Terminé","dashboard.search_ph":"Rechercher des infos utilisateur...","dashboard.loading":"Chargement des demandes...","dashboard.empty.title":"Aucune demande pour le moment","dashboard.empty.body":"Commencez par créer une nouvelle demande de service pour un client. Vous pouvez ajouter tous les détails, joindre des photos et l'assigner à un opérateur.","dashboard.empty.cta":"Créer votre première demande","user.submit_title":"Soumettre une demande de service","user.info_label":"Nom complet, Modèle de voiture, Téléphone, Localisation","user.info_ph":"Collez vos informations ici...","user.image_url":"Ou collez l'URL de l'image","user.or":"OU","user.upload_photo":"Téléverser une photo","user.upload_file":"Téléverser un fichier","user.file_hint":"PNG, JPG jusqu'à 10 Mo","user.send":"Envoyer la demande","request.status.submitted":"Soumis","request.status.in_progress":"En cours","request.status.completed":"Terminé","request.issue.title":"Description du problème","request.assignment.title":"Détails de l'assignation","request.assignment.operator":"Opérateur :","request.assignment.assigned_by":"Assigné par :","request.actions.resolve":"Marquer comme résolu","request.actions.assign":"Assigner","request.actions.reassign":"Réassigner","request.actions.delete":"Supprimer la demande","footer.body":"Votre partenaire de confiance pour l'assistance routière d'urgence. Nous offrons un support 24/7 pour vous remettre sur la route en toute sécurité et rapidement.","footer.rights":"Tous droits réservés.","footer.made":"Fait avec ❤️ par votre équipe.","modal.assignment.title":"Assigner la demande","modal.assignment.select_operator":"Sélectionner un opérateur","modal.assignment.choose_operator":"Choisissez un opérateur...","modal.assignment.select_user":"Sélectionner un utilisateur","modal.assignment.choose_user":"Choisissez un utilisateur...","modal.assignment.assign":"Assigner","modal.assignment.assigning":"Assignation...","modal.cancel":"Annuler","modal.create_request.title":"Créer une demande de service","modal.customer_info":"Informations du client","modal.customer_name":"Nom du client *","modal.customer_name_ph":"Entrez le nom complet du client","modal.phone":"Numéro de téléphone *","modal.phone_ph":"+212 6XX XXX XXX","modal.location":"Localisation *","modal.location_ph":"Adresse ou repère","modal.vehicle_info":"Informations du véhicule","modal.car_model":"Modèle de voiture *","modal.car_model_ph":"ex. Toyota Corolla","modal.year":"Année","modal.urgency":"Niveau d'urgence","modal.urgency.low":"Faible","modal.urgency.medium":"Moyen","modal.urgency.high":"Élevé","modal.urgency.emergency":"Urgence","modal.issue":"Description du problème *","modal.issue_ph":"Décrivez le problème en détail...","modal.attach_photo":"Joindre une photo (optionnel)","modal.upload_device":"Téléverser depuis l'appareil","modal.click_upload":"Cliquez pour téléverser une image","modal.preview":"Aperçu :","modal.or_paste_url":"Ou collez l'URL de l'image","modal.operator_optional":"Assigner à un opérateur (optionnel)","modal.operator_select":"Sélectionnez un opérateur...","modal.create":"Créer la demande","language.en":"English","language.fr":"Français","language.switcher":"Langue","onboarding.step":"Étape","onboarding.build_profile":"Construisez votre profil","onboarding.one_liner":"Phrase d'accroche","onboarding.one_liner_ph":"Développeur Web créant des sites modernes et responsives.","onboarding.skills":"Compétences","onboarding.skill_ph":"Ajoutez une compétence puis Entrée...","onboarding.add":"Ajouter","onboarding.up_to_three":"Ajoutez jusqu'à trois compétences","onboarding.rate":"Taux horaire","onboarding.select_rate":"Sélectionnez votre taux horaire","onboarding.photo":"Photo de profil","onboarding.upload_photo":"Téléverser une photo","onboarding.continue":"Continuer","onboarding.add_links":"Ajouter des liens sociaux","onboarding.link_1":"Lien n°1","onboarding.link_2":"Lien n°2","onboarding.link_ph":"https://instagram.com/votrenom ou https://x.com/votrenom","onboarding.back":"Retour","onboarding.complete":"Terminer","onboarding.preview_name":"Liam Basil","onboarding.preview_oneliner":"Votre phrase d'accroche apparaîtra ici."},Ge="undefined"!=typeof window?localStorage.getItem("language"):null;i.use(n).init({resources:{en:{translation:Xe},fr:{translation:He}},lng:Ge||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});p.createRoot(document.getElementById("root")).render(x.jsx(o.StrictMode,{children:x.jsx(Ce,{children:x.jsx(be,{children:x.jsx(Je,{})})})}));
