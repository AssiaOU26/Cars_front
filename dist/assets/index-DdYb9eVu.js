import{r as e,a as t,R as s}from"./vendor-BXk_ma1u.js";import{u as a,i as r,a as i}from"./utils-UD4LLoKl.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var n={exports:{}},o={},l=e,d=Symbol.for("react.element"),c=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,u=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,s){var a,r={},i=null,n=null;for(a in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(n=t.ref),t)m.call(t,a)&&!x.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:d,type:e,key:i,ref:n,props:r,_owner:u.current}}o.Fragment=c,o.jsx=h,o.jsxs=h,n.exports=o;var p=n.exports,g={},f=t;g.createRoot=f.createRoot,g.hydrateRoot=f.hydrateRoot;let b,j,v,y={data:""},N=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,w=/\/\*[^]*?\*\/|  +/g,_=/\n+/g,k=(e,t)=>{let s="",a="",r="";for(let i in e){let n=e[i];"@"==i[0]?"i"==i[1]?s=i+" "+n+";":a+="f"==i[1]?k(n,i):i+"{"+k(n,"k"==i[1]?"":t)+"}":"object"==typeof n?a+=k(n,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=n&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=k.p?k.p(i,n):i+":"+n+";")}return s+(t&&r?t+"{"+r+"}":r)+a},S={},C=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+C(e[s]);return t}return e};function q(e){let t=this||{},s=e.call?e(t.p):e;return((e,t,s,a,r)=>{let i=C(e),n=S[i]||(S[i]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(i));if(!S[n]){let t=i!==e?e:(e=>{let t,s,a=[{}];for(;t=N.exec(e.replace(w,""));)t[4]?a.shift():t[3]?(s=t[3].replace(_," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(_," ").trim();return a[0]})(e);S[n]=k(r?{["@keyframes "+n]:t}:t,s?"":"."+n)}let o=s&&S.g?S.g:null;return s&&(S.g=S[n]),l=S[n],d=t,c=a,(m=o)?d.data=d.data.replace(m,l):-1===d.data.indexOf(l)&&(d.data=c?l+d.data:d.data+l),n;var l,d,c,m})(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,r)=>{let i=t[r];if(i&&i.call){let e=i(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":k(e,""):!1===e?"":e}return e+a+(null==i?"":i)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,(a=t.target,"object"==typeof window?((a?a.querySelector("#_goober"):window._goober)||Object.assign((a||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:a||y),t.g,t.o,t.k);var a}q.bind({g:1});let A=q.bind({k:1});function I(e,t){let s=this||{};return function(){let t=arguments;return function a(r,i){let n=Object.assign({},r),o=n.className||a.className;s.p=Object.assign({theme:j&&j()},n),s.o=/ *go\d+/.test(o),n.className=q.apply(s,t)+(o?" "+o:"");let l=e;return e[0]&&(l=n.as||e,delete n.as),v&&l[0]&&v(n),b(l,n)}}}var P=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,E=(()=>{let e=0;return()=>(++e).toString()})(),O=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),D="default",R=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:a}=t;return R(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},$=[],L={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},T={},z=(e,t=D)=>{T[t]=R(T[t]||L,e),$.forEach(([e,s])=>{e===t&&s(T[t])})},F=e=>Object.keys(T).forEach(t=>z(e,t)),U=(e=D)=>t=>{z(t,e)},M={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},V=e=>(t,s)=>{let a=((e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||E()}))(t,e,s);return U(a.toasterId||(e=>Object.keys(T).find(t=>T[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},Y=(e,t)=>V("blank")(e,t);Y.error=V("error"),Y.success=V("success"),Y.loading=V("loading"),Y.custom=V("custom"),Y.dismiss=(e,t)=>{let s={type:3,toastId:e};t?U(t)(s):F(s)},Y.dismissAll=e=>Y.dismiss(void 0,e),Y.remove=(e,t)=>{let s={type:4,toastId:e};t?U(t)(s):F(s)},Y.removeAll=e=>Y.remove(void 0,e),Y.promise=(e,t,s)=>{let a=Y.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?P(t.success,e):void 0;return r?Y.success(r,{id:a,...s,...null==s?void 0:s.success}):Y.dismiss(a),e}).catch(e=>{let r=t.error?P(t.error,e):void 0;r?Y.error(r,{id:a,...s,...null==s?void 0:s.error}):Y.dismiss(a)}),e};var B,J,X,H,G=(t,s="default")=>{let{toasts:a,pausedAt:r}=((t={},s=D)=>{let[a,r]=e.useState(T[s]||L),i=e.useRef(T[s]);e.useEffect(()=>(i.current!==T[s]&&r(T[s]),$.push([s,r]),()=>{let e=$.findIndex(([e])=>e===s);e>-1&&$.splice(e,1)}),[s]);let n=a.toasts.map(e=>{var s,a,r;return{...t,...t[e.type],...e,removeDelay:e.removeDelay||(null==(s=t[e.type])?void 0:s.removeDelay)||(null==t?void 0:t.removeDelay),duration:e.duration||(null==(a=t[e.type])?void 0:a.duration)||(null==t?void 0:t.duration)||M[e.type],style:{...t.style,...null==(r=t[e.type])?void 0:r.style,...e.style}}});return{...a,toasts:n}})(t,s),i=e.useRef(new Map).current,n=e.useCallback((e,t=1e3)=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),o({type:4,toastId:e})},t);i.set(e,s)},[]);e.useEffect(()=>{if(r)return;let e=Date.now(),t=a.map(t=>{if(t.duration===1/0)return;let a=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(a<0))return setTimeout(()=>Y.dismiss(t.id,s),a);t.visible&&Y.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[a,r,s]);let o=e.useCallback(U(s),[s]),l=e.useCallback(()=>{o({type:5,time:Date.now()})},[o]),d=e.useCallback((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),c=e.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),m=e.useCallback((e,t)=>{let{reverseOrder:s=!1,gutter:r=8,defaultPosition:i}=t||{},n=a.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=n.findIndex(t=>t.id===e.id),l=n.filter((e,t)=>t<o&&e.visible).length;return n.filter(e=>e.visible).slice(...s?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+r,0)},[a]);return e.useEffect(()=>{a.forEach(e=>{if(e.dismissed)n(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[a,n]),{toasts:a,handlers:{updateHeight:d,startPause:l,endPause:c,calculateOffset:m}}},W=A`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,K=A`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Z=A`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Q=I("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${W} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${K} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Z} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ee=A`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,te=I("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${ee} 1s linear infinite;
`,se=A`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ae=A`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,re=I("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${se} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ae} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ie=I("div")`
  position: absolute;
`,ne=I("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,oe=A`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,le=I("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${oe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,de=({toast:t})=>{let{icon:s,type:a,iconTheme:r}=t;return void 0!==s?"string"==typeof s?e.createElement(le,null,s):s:"blank"===a?null:e.createElement(ne,null,e.createElement(te,{...r}),"loading"!==a&&e.createElement(ie,null,"error"===a?e.createElement(Q,{...r}):e.createElement(re,{...r})))},ce=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,me=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,ue=I("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xe=I("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,he=e.memo(({toast:t,position:s,style:a,children:r})=>{let i=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,r]=O()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ce(s),me(s)];return{animation:t?`${A(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${A(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||s||"top-center",t.visible):{opacity:0},n=e.createElement(de,{toast:t}),o=e.createElement(xe,{...t.ariaProps},P(t.message,t));return e.createElement(ue,{className:t.className,style:{...i,...a,...t.style}},"function"==typeof r?r({icon:n,message:o}):e.createElement(e.Fragment,null,n,o))});B=e.createElement,k.p=J,b=B,j=X,v=H;var pe=({id:t,className:s,style:a,onHeightUpdate:r,children:i})=>{let n=e.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;r(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return e.createElement("div",{ref:n,className:s,style:a},i)},ge=q`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,fe=({reverseOrder:t,position:s="top-center",toastOptions:a,gutter:r,children:i,toasterId:n,containerStyle:o,containerClassName:l})=>{let{toasts:d,handlers:c}=G(a,n);return e.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},d.map(a=>{let n=a.position||s,o=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:O()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...a,...r}})(n,c.calculateOffset(a,{reverseOrder:t,gutter:r,defaultPosition:s}));return e.createElement(pe,{id:a.id,key:a.id,onHeightUpdate:c.updateHeight,className:a.visible?ge:"",style:o},"custom"===a.type?P(a.message,a):i?i(a):e.createElement(he,{toast:a,position:n}))}))},be=Y;const je=e.createContext(null),ve=({children:t})=>{const[s,a]=e.useState(null),[r,i]=e.useState(localStorage.getItem("token"));e.useEffect(()=>{if(r)try{const e=JSON.parse(atob(r.split(".")[1]));a(e)}catch(B){console.error("Invalid token:",B),localStorage.removeItem("token"),i(null)}},[r]);return p.jsx(je.Provider,{value:{user:s,token:r,login:e=>{localStorage.setItem("token",e),i(e)},logout:()=>{localStorage.removeItem("token"),i(null),a(null)}},children:t})},ye=()=>e.useContext(je);async function Ne(e,t={}){try{const s=localStorage.getItem("token"),a={"Content-Type":"application/json",...t.headers};s&&(a.Authorization=`Bearer ${s}`);const r=await fetch(`${e}`||e,{...t,headers:a});if(!r.ok){401!==r.status&&403!==r.status||(localStorage.removeItem("token"),window.location.reload());const e=await r.json().catch(()=>({message:"Network response was not ok"}));throw new Error(e.error||"An unknown error occurred")}return 204===r.status?null:await r.json()}catch(s){throw console.error(`API call to ${e} failed:`,s),s}}function we(e=void 0){let t="";if(e&&(e.status||e.q||e.limit||e.offset)){const s=new URLSearchParams;e.status&&s.set("status",e.status),e.q&&s.set("q",e.q),e.limit&&s.set("limit",String(e.limit)),e.offset&&s.set("offset",String(e.offset)),t=`?${s.toString()}`}return Ne(`/api/requests${t}`)}function _e(){return Ne("/api/contacts")}function ke(){return Ne("/api/users")}function Se(e,t){return Ne(`/api/requests/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})})}function Ce(){return Ne("/api/stats/overview")}const qe=e.createContext(),Ae=({children:t})=>{const[s,a]=e.useState(()=>localStorage.getItem("theme")||"dark");e.useEffect(()=>{localStorage.setItem("theme",s),document.documentElement.setAttribute("data-theme",s)},[s]);return p.jsx(qe.Provider,{value:{theme:s,toggleTheme:()=>{a(e=>"dark"===e?"light":"dark")},isDark:"dark"===s},children:t})},Ie=()=>{const t=e.useContext(qe);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t};function Pe(){const[t,s]=e.useState(null),[r,i]=e.useState(new Date),{user:n}=ye(),{theme:o,toggleTheme:l,isDark:d}=Ie(),{t:c,i18n:m}=a();e.useEffect(()=>{let e=!0;return Ce().then(t=>{e&&s(t)}).catch(()=>{}),()=>{e=!1}},[]),e.useEffect(()=>{const e=setInterval(()=>i(new Date),1e3);return()=>clearInterval(e)},[]);return p.jsxs("header",{className:"ios-header",children:[p.jsx("div",{className:"container mx-auto px-6",children:p.jsxs("div",{className:"flex items-center justify-between py-6",children:[p.jsx("div",{className:"flex items-center gap-6",children:p.jsxs("div",{className:"ios-header-brand flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-lg",children:p.jsx("i",{className:"fas fa-car-crash text-ios-primary text-xl font-bold"})}),p.jsxs("div",{className:"text-white",children:[p.jsx("h1",{className:"text-2xl font-bold leading-tight",children:c("brand")}),p.jsx("p",{className:"text-xs text-white/80 uppercase tracking-wider font-medium",children:c("tagline")})]})]})}),p.jsx("div",{className:"hidden xl:flex items-center",children:t&&p.jsxs("div",{className:"ios-header-stats flex items-center gap-8 px-8 py-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-theme-text mb-1",children:t.totalRequests}),p.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:c("stats.total")})]}),p.jsx("div",{className:"w-px h-10 bg-theme-border"}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-ios-warning mb-1",children:t.submitted}),p.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:c("stats.pending")})]}),p.jsx("div",{className:"w-px h-10 bg-theme-border"}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-ios-primary mb-1",children:t.inProgress}),p.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:c("stats.active")})]}),p.jsx("div",{className:"w-px h-10 bg-theme-border"}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-ios-success mb-1",children:t.completed}),p.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:c("stats.done")})]})]})}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"ios-header-controls flex items-center gap-3 px-4 py-3",children:[p.jsx("i",{className:"fas fa-globe text-ios-primary text-sm"}),p.jsxs("select",{value:m.language,onChange:e=>(t=>{m.changeLanguage(t);try{localStorage.setItem("language",t)}catch(e){}})(e.target.value),className:"bg-transparent text-sm text-theme-text font-semibold focus:outline-none cursor-pointer min-w-[60px]",children:[p.jsx("option",{value:"en",children:"EN"}),p.jsx("option",{value:"fr",children:"FR"})]})]}),p.jsx("button",{onClick:l,className:"ios-header-controls p-3 hover:scale-105 transition-transform duration-300",title:c("theme.switch",{mode:d?"light":"dark"}),children:p.jsx("i",{className:`fas ${d?"fa-sun":"fa-moon"} text-lg text-theme-text`})}),p.jsxs("div",{className:"hidden lg:block ios-header-controls text-center px-4 py-3",children:[p.jsx("div",{className:"text-lg font-mono font-bold text-theme-text",children:(u=r,u.toLocaleTimeString("fr"===m.language?"fr-FR":"en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}))}),p.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:(e=>e.toLocaleDateString("fr"===m.language?"fr-FR":"en-US",{weekday:"short",month:"short",day:"numeric"}))(r)})]}),n&&p.jsxs("div",{className:"ios-header-controls flex items-center gap-4 px-4 py-3",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-ios-success animate-pulse"}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"text-sm font-bold text-theme-text",children:n.username}),p.jsx("div",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-semibold",children:"super_admin"===n.role?c("role.super_admin"):c("role.admin")})]})]})]})]})}),p.jsx("div",{className:"lg:hidden border-t border-theme-border/50 bg-theme-surface/50",children:p.jsx("div",{className:"container mx-auto px-6",children:p.jsx("div",{className:"flex justify-center py-4",children:t&&p.jsxs("div",{className:"ios-header-stats flex items-center gap-6 px-6 py-4",children:[p.jsxs("span",{className:"flex items-center gap-2 text-theme-text-secondary text-sm font-semibold",children:[p.jsx("i",{className:"fas fa-chart-bar text-xs"}),c("dashboard.total"),":"," ",p.jsx("span",{className:"text-theme-text font-bold",children:t.totalRequests})]}),p.jsxs("span",{className:"flex items-center gap-2 text-theme-text-secondary text-sm font-semibold",children:[p.jsx("div",{className:"w-2 h-2 bg-ios-warning rounded-full"}),c("dashboard.pending"),":"," ",p.jsx("span",{className:"text-ios-warning font-bold",children:t.submitted})]}),p.jsxs("span",{className:"flex items-center gap-2 text-theme-text-secondary text-sm font-semibold",children:[p.jsx("div",{className:"w-2 h-2 bg-ios-primary rounded-full"}),c("stats.active"),":"," ",p.jsx("span",{className:"text-ios-primary font-bold",children:t.inProgress})]}),p.jsxs("span",{className:"flex items-center gap-2 text-theme-text-secondary text-sm font-semibold",children:[p.jsx("div",{className:"w-2 h-2 bg-ios-success rounded-full"}),c("stats.done"),":"," ",p.jsx("span",{className:"text-ios-success font-bold",children:t.completed})]})]})})})})]});var u}function Ee({isOpen:t,onClose:s,requestId:r,contacts:i,users:n,onAssignmentSuccess:o}){const[l,d]=e.useState(""),[c,m]=e.useState(""),[u,x]=e.useState("assigned"),[h,g]=e.useState(!1),{t:f}=a();e.useEffect(()=>{t||(d(""),m(""),x("assigned"))},[t]);return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 transition-opacity duration-300 "+(t?"opacity-100":"opacity-0 pointer-events-none"),children:p.jsxs("div",{className:"glass-effect rounded-lg p-6 shadow-2xl transform transition-all duration-300 max-w-md w-full mx-4 "+(t?"scale-100 opacity-100":"scale-95 opacity-0"),children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-bold text-white",children:f("modal.assignment.title")}),p.jsx("button",{onClick:s,className:"text-white/60 hover:text-white",children:p.jsx("i",{className:"fas fa-times text-xl"})})]}),p.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l&&c){g(!0);try{await(t={requestId:r,operatorId:l,userId:c,status:u},Ne("/api/assignments",{method:"POST",body:JSON.stringify(t)})),be.success(f("toast.assignment_success",{defaultValue:"Assignment successful!"})),o(),s()}catch(a){be.error(f("error.assignment_failed",{defaultValue:"Assignment failed."}))}finally{g(!1)}var t}else be.error(f("error.assignment_select_both",{defaultValue:"Please select both an operator and a user."}))},className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"assignment-contact",className:"block text-sm font-medium text-white/90 mb-1",children:f("modal.assignment.select_operator")}),p.jsxs("select",{id:"assignment-contact",value:l,onChange:e=>d(e.target.value),className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-white/50",required:!0,children:[p.jsx("option",{value:"",children:f("modal.assignment.choose_operator")}),i.map(e=>p.jsxs("option",{value:e.id,children:[e.name," (",e.role,")"]},e.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"assignment-user",className:"block text-sm font-medium text-white/90 mb-1",children:f("modal.assignment.select_user")}),p.jsxs("select",{id:"assignment-user",value:c,onChange:e=>m(e.target.value),className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-white/50",required:!0,children:[p.jsx("option",{value:"",children:f("modal.assignment.choose_user")}),n.map(e=>p.jsxs("option",{value:e.id,children:[e.username," (",e.role,")"]},e.id))]})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx("button",{type:"submit",disabled:h,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-gray-500 transition-colors",children:f(h?"modal.assignment.assigning":"modal.assignment.assign")}),p.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:f("modal.cancel")})]})]})]})})}function Oe({isOpen:t,onClose:s,contacts:r,onSuccess:i}){const[n,o]=e.useState({customerName:"",customerPhone:"",location:"",carModel:"",carYear:"",issueDescription:"",urgencyLevel:"medium",imageUrl:"",assignToOperator:""}),[l,d]=e.useState(null),[c,m]=e.useState(null),[u,x]=e.useState(!1),{t:h}=a();e.useEffect(()=>{t||(o({customerName:"",customerPhone:"",location:"",carModel:"",carYear:"",issueDescription:"",urgencyLevel:"medium",imageUrl:"",assignToOperator:""}),d(null),m(null))},[t]);const g=e=>{const{name:t,value:s}=e.target;o(e=>({...e,[t]:s}))};return t?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"glass-effect rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[p.jsx("div",{className:"p-6 border-b border-white/20",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-white",children:h("modal.create_request.title")}),p.jsx("button",{onClick:s,className:"text-white/60 hover:text-white text-2xl",children:p.jsx("i",{className:"fas fa-times"})})]})}),p.jsxs("form",{onSubmit:async e=>{e.preventDefault(),x(!0);try{const e=`${n.customerName}\n${n.carModel} ${n.carYear}\n${n.customerPhone}\n${n.location}\n\nIssue: ${n.issueDescription}\nUrgency: ${n.urgencyLevel.toUpperCase()}`;let r;if(l){const t=new FormData;t.append("userInfo",e),t.append("photo",l),r=await async function(e){try{const t=localStorage.getItem("token"),s={};t&&(s.Authorization=`Bearer ${t}`);const a=await fetch("/api/requests",{method:"POST",headers:s,body:e});if(!a.ok){401!==a.status&&403!==a.status||(localStorage.removeItem("token"),window.location.reload());const e=await a.json().catch(()=>({message:"Network response was not ok"}));throw new Error(e.error||"An unknown error occurred")}return await a.json()}catch(t){throw console.error("API createRequest failed:",t),t}}(t)}else r=await(t={userInfo:e,imageUrl:n.imageUrl||null},Ne("/api/requests",{method:"POST",body:JSON.stringify(t)}));if(be.success(h("toast.request_created",{defaultValue:"Request created successfully!"})),n.assignToOperator&&r.id)try{await fetch("/api/assignments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({requestId:r.id,operatorId:n.assignToOperator,userId:JSON.parse(atob(localStorage.getItem("token").split(".")[1])).id,status:"assigned"})}),be.success(h("toast.request_assigned",{defaultValue:"Request assigned to operator!"}))}catch(a){console.warn("Assignment failed:",a),be.error(h("error.assignment_partial",{defaultValue:"Request created but assignment failed"}))}i(),s()}catch(r){be.error(h("error.create_request_failed",{defaultValue:"Failed to create request."}))}finally{x(!1)}var t},className:"p-6 space-y-6",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2 mb-4",children:[p.jsx("i",{className:"fas fa-user mr-2"}),"Customer & Vehicle Information"]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-white/90 mb-2",children:[h("modal.customer_info")," & ",h("modal.vehicle_info")]}),p.jsx("textarea",{name:"customerInfo",value:`${n.customerName}\n${n.carModel} ${n.carYear}\n${n.customerPhone}\n${n.location}`,onChange:e=>{const t=(e=>{var t,s;const a=e.split("\n").map(e=>e.trim()).filter(e=>e);return{customerName:a[0]||"",carModel:(null==(t=a[1])?void 0:t.split(" ").slice(0,-1).join(" "))||"",carYear:(null==(s=a[1])?void 0:s.split(" ").pop())||"",customerPhone:a[2]||"",location:a[3]||""}})(e.target.value);o(e=>({...e,...t}))},required:!0,rows:"4",className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Line 1: ${h("modal.customer_name_ph")}\nLine 2: ${h("modal.car_model_ph")} ${h("modal.year")} (e.g., Toyota Corolla 2020)\nLine 3: ${h("modal.phone_ph")}\nLine 4: ${h("modal.location_ph")}\n\n⚠️ Put each answer on a separate line`}),p.jsxs("p",{className:"text-xs text-white/60 mt-2",children:[p.jsx("i",{className:"fas fa-info-circle mr-1"}),p.jsx("strong",{children:"Format:"})," Name on line 1, Car Model & Year on line 2, Phone on line 3, Location on line 4"]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:h("modal.urgency")}),p.jsxs("select",{name:"urgencyLevel",value:n.urgencyLevel,onChange:g,className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[p.jsx("option",{value:"low",children:h("modal.urgency.low")}),p.jsx("option",{value:"medium",children:h("modal.urgency.medium")}),p.jsx("option",{value:"high",children:h("modal.urgency.high")}),p.jsx("option",{value:"emergency",children:h("modal.urgency.emergency")})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:h("modal.issue")}),p.jsx("textarea",{name:"issueDescription",value:n.issueDescription,onChange:g,required:!0,rows:"4",className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:h("modal.issue_ph")})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2 mb-4",children:[p.jsx("i",{className:"fas fa-camera mr-2"}),h("modal.attach_photo")]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:h("modal.upload_device")}),p.jsxs("div",{className:"border-2 border-dashed border-white/30 rounded-lg p-6 text-center bg-white/5 hover:bg-white/10 transition-colors",children:[p.jsx("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(t){d(t);const e=new FileReader;e.onload=e=>m(e.target.result),e.readAsDataURL(t),o(e=>({...e,imageUrl:""}))}},accept:"image/*",className:"hidden",id:"file-upload"}),p.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[p.jsx("i",{className:"fas fa-cloud-upload-alt text-3xl text-white/60 mb-2 block"}),p.jsx("p",{className:"text-white/80",children:h("modal.click_upload")}),p.jsx("p",{className:"text-white/60 text-sm",children:h("user.file_hint")})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:h("modal.or_paste_url")}),p.jsx("input",{type:"url",value:n.imageUrl,onChange:e=>{const t=e.target.value;o(e=>({...e,imageUrl:t})),t?(d(null),m(t)):m(null)},className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"})]})]}),c&&p.jsxs("div",{className:"mt-4",children:[p.jsx("p",{className:"text-sm font-medium text-white/90 mb-2",children:h("modal.preview")}),p.jsxs("div",{className:"relative inline-block",children:[p.jsx("img",{src:c,alt:"Preview",className:"max-w-xs max-h-48 rounded-lg border border-white/20"}),p.jsx("button",{type:"button",onClick:()=>{m(null),d(null),o(e=>({...e,imageUrl:""}))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]})]})]}),r&&r.length>0&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:h("modal.operator_optional")}),p.jsxs("select",{name:"assignToOperator",value:n.assignToOperator,onChange:g,className:"w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[p.jsx("option",{value:"",children:h("modal.operator_select")}),r.map(e=>p.jsx("option",{value:e.id,children:e.name},e.id))]})]}),p.jsxs("div",{className:"flex gap-4 pt-4 border-t border-white/20",children:[p.jsx("button",{type:"submit",disabled:u,className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),h("modal.create")]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-plus mr-2"}),h("modal.create")]})}),p.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 bg-white/20 hover:bg-white/30 text-white font-medium rounded-lg transition-colors",children:h("modal.cancel")})]})]})]})}):null}const De=e=>{switch(e){case"Submitted":return"bg-ios-warning text-white";case"In Progress":return"bg-ios-primary text-white";case"Completed":return"bg-ios-success text-white";default:return"bg-gray-500 text-white"}},Re=e=>{switch(e){case"Submitted":return"fas fa-clock";case"In Progress":return"fas fa-cog fa-spin";case"Completed":return"fas fa-check-circle";default:return"fas fa-question-circle"}},$e=e=>{switch(e){case"LOW":return"bg-ios-success/20 text-ios-success border-ios-success/40";case"MEDIUM":return"bg-ios-warning/20 text-ios-warning border-ios-warning/40";case"HIGH":return"bg-ios-error/20 text-ios-error border-ios-error/40";case"EMERGENCY":return"bg-red-500/20 text-red-500 border-red-500/40";default:return"bg-gray-500/20 text-gray-500 border-gray-500/40"}};function Le({request:e,onAssign:t,onResolve:s,onDelete:r}){var i;const{t:n}=a(),o="Completed"===e.status,l=e.userInfo?e.userInfo.split("\n").filter(e=>e.trim()):[],d=l[0]||"Unknown Customer",c=l[1]||"Vehicle info not provided",m=l[2]||"No phone",u=l[3]||"Location not specified",x=l.findIndex(e=>e.toLowerCase().includes("issue:")),h=-1!==x?l[x].replace(/^issue:\s*/i,""):"No issue description",g=null==(i=e.userInfo)?void 0:i.match(/Urgency:\s*(LOW|MEDIUM|HIGH|EMERGENCY)/i),f=g?g[1].toUpperCase():null;return p.jsxs("div",{className:"ios-card relative "+(o?"opacity-75":""),children:[f&&p.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:p.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full border ${$e(f)} font-medium uppercase tracking-wider`,children:f})}),p.jsx("div",{className:"absolute top-4 left-4 z-10",children:p.jsxs("span",{className:`text-xs font-bold px-3 py-1 rounded-full ${De(e.status)} flex items-center gap-2 font-medium uppercase tracking-wider`,children:[p.jsx("i",{className:Re(e.status)}),e.status]})}),p.jsx("div",{className:"relative mb-6 overflow-hidden rounded-xl mt-8",children:p.jsx("img",{src:e.imageUrl||"https://placehold.co/600x400/0A0E27/8B5FFF?text=No+Image+Available",alt:"Service request",className:"w-full h-48 object-cover rounded-xl"})}),p.jsxs("div",{className:"mb-6 space-y-4",children:[p.jsxs("div",{className:"ios-card p-4",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p.jsx("div",{className:"w-10 h-10 bg-ios-primary/20 rounded-lg flex items-center justify-center",children:p.jsx("i",{className:"fas fa-user text-ios-primary text-lg"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-bold text-theme-text",children:d}),p.jsx("p",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider",children:"Customer Information"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-3 p-2 bg-theme-surface rounded-lg",children:[p.jsx("div",{className:"w-6 h-6 bg-ios-warning/20 rounded flex items-center justify-center",children:p.jsx("i",{className:"fas fa-car text-ios-warning text-sm"})}),p.jsx("span",{className:"text-sm text-theme-text font-medium",children:c})]}),p.jsxs("div",{className:"flex items-center gap-3 p-2 bg-theme-surface rounded-lg",children:[p.jsx("div",{className:"w-6 h-6 bg-ios-success/20 rounded flex items-center justify-center",children:p.jsx("i",{className:"fas fa-phone text-ios-success text-sm"})}),p.jsx("span",{className:"text-sm text-theme-text font-medium",children:m})]}),p.jsxs("div",{className:"flex items-center gap-3 p-2 bg-theme-surface rounded-lg",children:[p.jsx("div",{className:"w-6 h-6 bg-ios-error/20 rounded flex items-center justify-center",children:p.jsx("i",{className:"fas fa-map-marker-alt text-ios-error text-sm"})}),p.jsx("span",{className:"text-sm text-theme-text font-medium",children:u})]})]})]}),p.jsxs("div",{className:"ios-card p-4 border-l-4 border-ios-error",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p.jsx("div",{className:"w-8 h-8 bg-ios-error/20 rounded-lg flex items-center justify-center",children:p.jsx("i",{className:"fas fa-exclamation-triangle text-ios-error text-sm"})}),p.jsx("h4",{className:"text-sm font-bold text-ios-error uppercase tracking-wider",children:n("request.issue.title")})]}),p.jsx("p",{className:"text-theme-text-secondary leading-relaxed",children:h})]}),e.contactName&&p.jsxs("div",{className:"ios-card p-4 border-l-4 border-ios-primary",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p.jsx("div",{className:"w-8 h-8 bg-ios-primary/20 rounded-lg flex items-center justify-center",children:p.jsx("i",{className:"fas fa-user-cog text-ios-primary text-sm"})}),p.jsx("h4",{className:"text-sm font-bold text-ios-primary uppercase tracking-wider",children:n("request.assignment.title")})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 bg-theme-surface rounded-lg",children:[p.jsx("span",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-medium",children:n("request.assignment.operator")}),p.jsx("span",{className:"text-sm text-theme-text font-semibold",children:e.contactName})]}),p.jsxs("div",{className:"flex items-center justify-between p-2 bg-theme-surface rounded-lg",children:[p.jsx("span",{className:"text-xs text-theme-text-tertiary uppercase tracking-wider font-medium",children:n("request.assignment.assigned_by")}),p.jsx("span",{className:"text-sm text-theme-text font-semibold",children:e.userName})]})]})]})]}),p.jsxs("div",{className:"flex gap-2 pt-4 border-t border-theme-border",children:[s&&p.jsxs("button",{onClick:()=>s(e.id),disabled:o,className:"flex-1 ios-button ios-button-success disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("i",{className:"fas fa-check mr-2"}),p.jsx("span",{children:n("request.actions.resolve")})]}),t&&p.jsxs("button",{onClick:()=>t(e.id),disabled:o,className:"flex-1 ios-button ios-button-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("i",{className:"fas fa-user-plus mr-2"}),p.jsx("span",{children:e.contactName?n("request.actions.reassign"):n("request.actions.assign")})]}),r&&p.jsxs("button",{onClick:()=>r(e.id),className:"w-full ios-button ios-button-error",children:[p.jsx("i",{className:"fas fa-trash mr-2"}),p.jsx("span",{children:n("request.actions.delete")})]})]})]})}const Te=()=>{const{t:e}=a();return p.jsx("footer",{className:"w-full mt-10",children:p.jsx("div",{className:"container mx-auto px-6",children:p.jsx("div",{className:"ios-card p-8",children:p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx("div",{className:"ios-header-brand flex items-center justify-center w-14 h-14",children:p.jsx("i",{className:"fas fa-car-burst text-white text-xl"})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-theme-text font-bold text-xl",children:e("brand")}),p.jsx("p",{className:"text-theme-text-secondary text-sm max-w-md font-medium",children:e("footer.body")})]})]}),p.jsxs("div",{className:"text-theme-text-secondary text-sm text-center md:text-right",children:[p.jsxs("div",{className:"font-semibold",children:["© ",(new Date).getFullYear()," — ",e("footer.rights")]}),p.jsx("div",{className:"text-xs opacity-80 mt-2 font-medium",children:e("footer.made")})]})]})})})})};function ze(){const[t,s]=e.useState([]),[r,i]=e.useState([]),[n,o]=e.useState([]),[l,d]=e.useState(!0),[c,m]=e.useState(null),[u,x]=e.useState(""),[h,g]=e.useState(""),[f,b]=e.useState(!1),[j,v]=e.useState(null),[y,N]=e.useState(!1),{t:w}=a(),_=e.useCallback(async()=>{d(!0);try{const[e,t,a,r]=await Promise.all([we({status:u||void 0,q:h||void 0,limit:100}),_e(),ke(),Ce()]);s(e),i(t),o(a),m(r)}catch(e){console.error("Failed to load dashboard data:",e),be.error(w("error.load_dashboard",{defaultValue:"Could not load dashboard data. Please check the console."}))}finally{d(!1)}},[u,h]);e.useEffect(()=>{_()},[_]),e.useEffect(()=>{const e=setInterval(()=>{_()},15e3);return()=>clearInterval(e)},[_]);const k=e=>{v(e),b(!0)},S=async e=>{try{await Se(e,"Completed"),be.success(w("toast.request_completed",{defaultValue:"Request marked as completed!"})),_()}catch(t){be.error(w("error.update_status_failed",{defaultValue:"Failed to update status."}))}};return p.jsxs(p.Fragment,{children:[p.jsx(Ee,{isOpen:f,onClose:()=>{b(!1),v(null)},requestId:j,contacts:r,users:n,onAssignmentSuccess:_}),p.jsx(Oe,{isOpen:y,onClose:()=>N(!1),contacts:r,onSuccess:_}),p.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[p.jsxs("div",{className:"ios-card",children:[p.jsxs("div",{className:"flex items-center justify-between mb-8",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx("div",{className:"ios-header-brand flex items-center justify-center w-16 h-16",children:p.jsx("i",{className:"fas fa-tachometer-alt text-white text-2xl"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold text-theme-text mb-2",children:w("dashboard.admin")}),p.jsx("p",{className:"text-theme-text-secondary text-lg font-medium",children:"Administrative Dashboard"})]})]}),p.jsxs("button",{onClick:()=>N(!0),className:"ios-button ios-button-primary px-8 py-4 text-lg font-semibold",children:[p.jsx("i",{className:"fas fa-plus mr-3 text-lg"}),p.jsx("span",{children:w("dashboard.new_request")})]})]}),c&&p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx("div",{className:"ios-card p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-xl font-semibold text-theme-text",children:c.totalRequests}),p.jsx("div",{className:"text-sm text-theme-text-tertiary",children:w("dashboard.total")})]}),p.jsx("i",{className:"fas fa-chart-bar text-ios-primary text-lg"})]})}),p.jsx("div",{className:"ios-card p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-xl font-semibold text-ios-warning",children:c.submitted}),p.jsx("div",{className:"text-sm text-theme-text-tertiary",children:w("dashboard.pending")})]}),p.jsx("i",{className:"fas fa-clock text-ios-warning text-lg"})]})}),p.jsx("div",{className:"ios-card p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-xl font-semibold text-ios-primary",children:c.inProgress}),p.jsx("div",{className:"text-sm text-theme-text-tertiary",children:w("dashboard.in_progress")})]}),p.jsx("i",{className:"fas fa-spinner text-ios-primary text-lg"})]})}),p.jsx("div",{className:"ios-card p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-xl font-semibold text-ios-success",children:c.completed}),p.jsx("div",{className:"text-sm text-theme-text-tertiary",children:w("dashboard.completed")})]}),p.jsx("i",{className:"fas fa-check-circle text-ios-success text-lg"})]})})]})]}),p.jsx("div",{className:"ios-card p-4",children:p.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-filter text-ios-primary text-sm"}),p.jsx("span",{className:"text-theme-text font-medium",children:"Filters"})]}),p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsxs("select",{value:u,onChange:e=>x(e.target.value),className:"ios-input px-3 py-2 text-sm",children:[p.jsx("option",{value:"",children:w("dashboard.filters.all")}),p.jsx("option",{value:"Submitted",children:w("dashboard.filters.submitted")}),p.jsx("option",{value:"In Progress",children:w("dashboard.filters.in_progress")}),p.jsx("option",{value:"Completed",children:w("dashboard.filters.completed")})]}),p.jsxs("div",{className:"relative flex-1 max-w-md",children:[p.jsx("input",{value:h,onChange:e=>g(e.target.value),placeholder:w("dashboard.search_ph"),className:"ios-input pl-9"}),p.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:p.jsx("i",{className:"fas fa-search text-theme-text-tertiary text-sm"})})]})]})]})}),p.jsx("div",{className:"ios-card overflow-hidden",children:l?p.jsxs("div",{className:"text-center py-20",children:[p.jsx("div",{className:"ios-loading mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-theme-text mb-2",children:w("dashboard.loading")}),p.jsx("p",{className:"text-theme-text-secondary",children:"Fetching latest data..."})]}):p.jsx("div",{className:"p-6",children:t.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,t)=>p.jsx("div",{className:"fade-in-up",style:{animationDelay:100*t+"ms"},children:p.jsx(Le,{request:e,onAssign:k,onResolve:S})},e.id))}):p.jsx("div",{className:"text-center py-20",children:p.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[p.jsx("div",{className:"w-24 h-24 mx-auto bg-theme-surface rounded-2xl flex items-center justify-center border border-theme-border",children:p.jsx("i",{className:"fas fa-clipboard-list text-3xl text-theme-text-tertiary"})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h3",{className:"text-2xl font-bold text-theme-text",children:w("dashboard.empty.title")}),p.jsx("p",{className:"text-theme-text-secondary text-lg",children:w("dashboard.empty.body")})]}),p.jsxs("button",{onClick:()=>N(!0),className:"ios-button ios-button-primary py-4 px-8",children:[p.jsx("i",{className:"fas fa-plus mr-2"}),w("dashboard.empty.cta")]})]})})})})]}),p.jsx(Te,{})]})}function Fe({isOpen:t,onClose:s,onSave:r,initialData:i}){const[n,o]=e.useState(""),[l,d]=e.useState(""),[c,m]=e.useState(""),[u,x]=e.useState("mechanic"),h=Boolean(i),{t:g}=a();e.useEffect(()=>{h?(o(i.name),d(i.phone),m(i.email),x(i.role)):(o(""),d(""),m(""),x("mechanic"))},[t,i,h]);return t?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:p.jsxs("div",{className:"glass-effect rounded-lg p-6 shadow-2xl transform transition-all max-w-md w-full mx-4",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:h?g("operator.edit",{defaultValue:"Edit Operator"}):g("operator.add",{defaultValue:"Add New Operator"})}),p.jsxs("form",{onSubmit:e=>{e.preventDefault(),r({name:n,phone:l,email:c,role:u})},className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1",children:g("common.name",{defaultValue:"Name"})}),p.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),required:!0,className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1",children:g("common.phone",{defaultValue:"Phone"})}),p.jsx("input",{type:"tel",value:l,onChange:e=>d(e.target.value),required:!0,className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1",children:g("auth.email")}),p.jsx("input",{type:"email",value:c,onChange:e=>m(e.target.value),required:!0,className:"w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50"})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx("button",{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:g("common.save",{defaultValue:"Save"})}),p.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:g("modal.cancel")})]})]})]})}):null}function Ue(){const[t,s]=e.useState([]),[a,r]=e.useState([]),[i,n]=e.useState([]),[o,l]=e.useState(!0),[d,c]=e.useState("operators"),[m,u]=e.useState(!1),[x,h]=e.useState(null),[g,f]=e.useState(""),[b,j]=e.useState(""),[v,y]=e.useState(!1),[N,w]=e.useState(null),[_,k]=e.useState(!1),{user:S}=ye(),C=e.useCallback(async()=>{l(!0);try{const[e,t,a]=await Promise.all([_e(),we({status:g||void 0,q:b||void 0,limit:100}),ke()]);s(e),r(t),n(a)}catch(e){be.error("Could not load dashboard data.")}finally{l(!1)}},[g,b]);e.useEffect(()=>{C()},[C]);const q=(e=null)=>{h(e),u(!0)},A=()=>{h(null),u(!1)},I=async e=>{if(window.confirm("Are you sure you want to delete this operator?"))try{await be.promise(function(e){return Ne(`/api/contacts/${e}`,{method:"DELETE"})}(e),{loading:"Deleting operator...",success:"Operator deleted.",error:"Failed to delete operator."}),C()}catch(t){console.error(t)}},P=async(e,t)=>{if((null==S?void 0:S.id)===e&&("inactive"===t||"denied"===t))return void be.error("You cannot deactivate or delete your own superadmin account.");const s=function(e,t){return Ne(`/api/users/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})})}(e,t);try{await be.promise(s,{loading:"Updating user status...",success:e=>e.message,error:e=>e.message}),C()}catch(a){console.error(a)}},E=e=>{w(e),y(!0)},O=async e=>{try{await Se(e,"Completed"),be.success("Request marked as completed!"),C()}catch(t){be.error("Failed to update status.")}},D=async e=>{if(window.confirm("Are you sure you want to permanently delete this request?"))try{await be.promise(function(e){return Ne(`/api/requests/${e}`,{method:"DELETE"})}(e),{loading:"Deleting request...",success:"Request deleted.",error:"Failed to delete request."}),C()}catch(t){console.error(t)}},R=e=>{switch(e){case"active":return"bg-green-500/20 text-green-300";case"inactive":return"bg-gray-500/20 text-gray-300";case"pending":return"bg-yellow-500/20 text-yellow-300";default:return"bg-red-500/20 text-red-300"}},$=i.filter(e=>"pending"===e.status),L=i.filter(e=>"pending"!==e.status);return p.jsxs(p.Fragment,{children:[p.jsx(Ee,{isOpen:v,onClose:()=>{y(!1),w(null)},requestId:N,contacts:t,users:i,onAssignmentSuccess:C}),p.jsx(Oe,{isOpen:_,onClose:()=>k(!1),contacts:t,onSuccess:C}),p.jsx(Fe,{isOpen:m,onClose:A,onSave:async e=>{const t=x?function(e,t){return Ne(`/api/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)})}(x.id,e):function(e){return Ne("/api/contacts",{method:"POST",body:JSON.stringify(e)})}(e);try{await be.promise(t,{loading:"Saving operator...",success:"Operator saved successfully!",error:"Failed to save operator."}),A(),C()}catch(s){console.error(s)}},initialData:x}),p.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[p.jsxs("div",{className:"ios-card p-8",children:[p.jsxs("div",{className:"flex items-center gap-8 mb-10",children:[p.jsx("div",{className:"ios-header-brand flex items-center justify-center w-24 h-24",children:p.jsx("i",{className:"fas fa-crown text-white text-4xl"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-5xl font-bold text-theme-text mb-3",children:"Super Admin Console"}),p.jsx("p",{className:"text-theme-text-secondary text-xl font-medium uppercase tracking-wider",children:"Complete Platform Control"})]})]}),p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"bg-theme-surface rounded-3xl p-2 border border-theme-border",children:p.jsxs("div",{className:"flex",children:[p.jsxs("button",{onClick:()=>c("operators"),className:"relative px-8 py-4 rounded-2xl font-semibold transition-all duration-300 flex items-center gap-3 "+("operators"===d?"bg-ios-primary text-white":"text-theme-text-secondary hover:text-theme-text hover:bg-theme-surface"),children:[p.jsx("i",{className:"fas fa-users-cog"}),p.jsx("span",{children:"Operators"})]}),p.jsxs("button",{onClick:()=>c("requests"),className:"relative px-8 py-4 rounded-2xl font-semibold transition-all duration-300 flex items-center gap-3 "+("requests"===d?"bg-ios-success text-white":"text-theme-text-secondary hover:text-theme-text hover:bg-theme-surface"),children:[p.jsx("i",{className:"fas fa-tasks"}),p.jsx("span",{children:"Requests"})]}),p.jsxs("button",{onClick:()=>c("users"),className:"relative px-8 py-4 rounded-2xl font-semibold transition-all duration-300 flex items-center gap-3 "+("users"===d?"bg-ios-secondary text-white":"text-theme-text-secondary hover:text-theme-text hover:bg-theme-surface"),children:[p.jsx("i",{className:"fas fa-user-shield"}),p.jsx("span",{children:"User Management"})]})]})})})]}),p.jsx("div",{className:"ios-card overflow-hidden",children:o?p.jsxs("div",{className:"text-center py-20",children:[p.jsx("div",{className:"ios-loading mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-theme-text mb-2",children:"Loading Super Admin Console"}),p.jsx("p",{className:"text-theme-text-secondary",children:"Initializing system..."})]}):p.jsxs("div",{className:"p-8",children:["operators"===d&&p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-xl flex items-center justify-center",children:p.jsx("i",{className:"fas fa-users-cog text-neon-blue text-xl"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold font-space text-white",children:"Operator Management"}),p.jsx("p",{className:"text-pro-light text-sm uppercase tracking-wider",children:"Manage Assessment Team"})]})]}),p.jsxs("button",{onClick:()=>q(),className:"pro-button py-3 px-6 text-white font-semibold rounded-2xl hover-lift group flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-plus group-hover:scale-110 transition-transform duration-300"}),p.jsx("span",{children:"Add Operator"})]})]}),p.jsx("div",{className:"grid gap-6",children:t.map((e,t)=>p.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-white/5 hover-lift card-enter",style:{animationDelay:100*t+"ms"},children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-neon-blue/20 to-neon-green/20 rounded-2xl flex items-center justify-center border border-white/10",children:p.jsx("i",{className:"fas fa-user-cog text-neon-blue text-xl"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-bold text-lg text-white mb-1",children:e.name}),p.jsxs("div",{className:"flex items-center gap-4 text-sm text-pro-light",children:[p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-phone text-xs"}),e.phone]}),p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-envelope text-xs"}),e.email]})]})]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:()=>q(e),className:"px-4 py-2 bg-neon-blue/20 text-neon-blue border border-neon-blue/30 rounded-xl text-sm font-medium hover:bg-neon-blue/30 transition-all duration-300",children:[p.jsx("i",{className:"fas fa-edit mr-2"}),"Edit"]}),p.jsxs("button",{onClick:()=>I(e.id),className:"px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/30 rounded-xl text-sm font-medium hover:bg-red-500/30 transition-all duration-300",children:[p.jsx("i",{className:"fas fa-trash mr-2"}),"Delete"]})]})]})},e.id))})]}),"requests"===d&&p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-xl flex items-center justify-center",children:p.jsx("i",{className:"fas fa-tasks text-neon-green text-xl"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold font-space text-white",children:"Request Management"}),p.jsx("p",{className:"text-pro-light text-sm uppercase tracking-wider",children:"Full Request Control"})]})]}),p.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-white/5",children:p.jsxs("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-filter text-neon-green text-sm"}),p.jsx("label",{className:"text-xs font-semibold text-pro-light uppercase tracking-wider",children:"Filters"})]}),p.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"glass-ultra border border-white/10 rounded-xl px-4 py-2 text-white text-sm font-medium focus:border-neon-green/50 focus:outline-none min-w-[140px]",children:[p.jsx("option",{value:"",children:"All Status"}),p.jsx("option",{value:"Submitted",children:"Submitted"}),p.jsx("option",{value:"In Progress",children:"In Progress"}),p.jsx("option",{value:"Completed",children:"Completed"})]}),p.jsxs("div",{className:"relative flex-1 max-w-sm",children:[p.jsx("input",{value:b,onChange:e=>j(e.target.value),placeholder:"Search requests...",className:"w-full glass-ultra border border-white/10 rounded-xl px-4 py-2 pl-10 text-white placeholder-pro-light/60 focus:border-neon-blue/50 focus:outline-none text-sm font-medium"}),p.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:p.jsx("i",{className:"fas fa-search text-pro-light/40 text-xs"})})]})]}),p.jsxs("button",{onClick:()=>k(!0),className:"pro-button py-3 px-6 text-white font-semibold rounded-2xl hover-lift group flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-plus group-hover:scale-110 transition-transform duration-300"}),p.jsx("span",{children:"New Request"})]})]})}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map((e,t)=>p.jsx("div",{className:"card-enter",style:{animationDelay:100*t+"ms"},children:p.jsx(Le,{request:e,onAssign:E,onResolve:O,onDelete:D})},e.id))})]}),"users"===d&&p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-purple/20 to-neon-pink/20 rounded-xl flex items-center justify-center",children:p.jsx("i",{className:"fas fa-user-shield text-neon-purple text-xl"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold font-space text-white",children:"User Management"}),p.jsx("p",{className:"text-pro-light text-sm uppercase tracking-wider",children:"Platform Access Control"})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-neon-yellow/20 to-neon-yellow/10 rounded-lg flex items-center justify-center",children:p.jsx("i",{className:"fas fa-hourglass-half text-neon-yellow text-sm"})}),p.jsxs("h3",{className:"text-xl font-bold text-neon-yellow",children:["Pending Approval (",$.length,")"]})]}),$.length>0?p.jsx("div",{className:"grid gap-4",children:$.map((e,t)=>p.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-neon-yellow/20 hover-lift card-enter",style:{animationDelay:100*t+"ms"},children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-yellow/20 to-neon-purple/20 rounded-xl flex items-center justify-center border border-white/10",children:p.jsx("i",{className:"fas fa-user-clock text-neon-yellow text-lg"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-bold text-lg text-white mb-1",children:e.username}),p.jsxs("p",{className:"text-sm text-pro-light flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-envelope text-xs"}),e.email]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("button",{onClick:()=>P(e.id,"active"),className:"px-6 py-3 bg-neon-green/20 text-neon-green border border-neon-green/30 rounded-xl font-semibold hover:bg-neon-green/30 transition-all duration-300 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-check"}),"Approve"]}),p.jsxs("button",{onClick:()=>P(e.id,"denied"),className:"px-6 py-3 bg-red-500/20 text-red-400 border border-red-500/30 rounded-xl font-semibold hover:bg-red-500/30 transition-all duration-300 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-times"}),"Deny"]})]})]})},e.id))}):p.jsxs("div",{className:"glass-ultra p-8 rounded-2xl border border-white/5 text-center",children:[p.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-2xl flex items-center justify-center mb-4",children:p.jsx("i",{className:"fas fa-check-circle text-neon-green text-2xl"})}),p.jsx("p",{className:"text-pro-light text-lg",children:"No users are currently pending approval."})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-lg flex items-center justify-center",children:p.jsx("i",{className:"fas fa-users text-neon-blue text-sm"})}),p.jsxs("h3",{className:"text-xl font-bold text-white",children:["Active & Inactive Users (",L.length,")"]})]}),p.jsx("div",{className:"grid gap-4",children:L.map((e,t)=>p.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-white/5 hover-lift card-enter",style:{animationDelay:100*t+"ms"},children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center border border-white/10 "+("active"===e.status?"bg-gradient-to-br from-neon-green/20 to-neon-blue/20":"bg-gradient-to-br from-gray-500/20 to-gray-400/20"),children:p.jsx("i",{className:`fas ${"active"===e.status?"fa-user-check":"fa-user-slash"} text-lg ${"active"===e.status?"text-neon-green":"text-gray-400"}`})}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-bold text-lg text-white mb-1",children:e.username}),p.jsxs("p",{className:"text-sm text-pro-light flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-envelope text-xs"}),e.email]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full uppercase tracking-wider ${R(e.status||"pending")}`,children:e.status||"pending"}),(null==S?void 0:S.id)!==e.id&&"active"===e.status&&p.jsxs("button",{onClick:()=>P(e.id,"inactive"),className:"px-4 py-2 bg-gray-500/20 text-gray-300 border border-gray-500/30 rounded-xl text-sm font-medium hover:bg-gray-500/30 transition-all duration-300 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-pause"}),"Deactivate"]}),(null==S?void 0:S.id)!==e.id&&"inactive"===e.status&&p.jsxs("button",{onClick:()=>P(e.id,"active"),className:"px-4 py-2 bg-neon-blue/20 text-neon-blue border border-neon-blue/30 rounded-xl text-sm font-medium hover:bg-neon-blue/30 transition-all duration-300 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-play"}),"Reactivate"]})]})]})},e.id))})]})]})]})})]}),p.jsx("div",{className:"mt-8",children:p.jsx(Te,{})})]})}function Me({setView:e}){const{login:t}=ye(),{t:s}=a();return p.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:p.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"hidden lg:flex flex-col justify-between ios-card p-8",children:[p.jsxs("div",{className:"space-y-8",children:[p.jsx("div",{className:"ios-header-brand flex items-center justify-center w-20 h-20",children:p.jsx("i",{className:"fas fa-car-crash text-white text-3xl"})}),p.jsxs("div",{className:"space-y-6",children:[p.jsx("h1",{className:"text-5xl font-bold text-theme-text leading-tight",children:s("brand")}),p.jsx("p",{className:"text-xl text-theme-text-secondary leading-relaxed font-medium",children:s("tagline")})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3 p-4 bg-theme-surface rounded-xl",children:[p.jsx("div",{className:"w-10 h-10 bg-ios-warning/20 rounded-lg flex items-center justify-center",children:p.jsx("i",{className:"fas fa-bolt text-ios-warning text-lg"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-theme-text font-semibold mb-1",children:"Real-time Operations"}),p.jsx("p",{className:"text-theme-text-secondary text-sm",children:"Advanced monitoring and instant response capabilities"})]})]}),p.jsxs("div",{className:"flex items-center gap-3 p-4 bg-theme-surface rounded-xl",children:[p.jsx("div",{className:"w-10 h-10 bg-ios-success/20 rounded-lg flex items-center justify-center",children:p.jsx("i",{className:"fas fa-shield-alt text-ios-success text-lg"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-theme-text font-semibold mb-1",children:"Enterprise Security"}),p.jsx("p",{className:"text-theme-text-secondary text-sm",children:"Military-grade encryption with role-based access control"})]})]}),p.jsxs("div",{className:"flex items-center gap-3 p-4 bg-theme-surface rounded-xl",children:[p.jsx("div",{className:"w-10 h-10 bg-ios-primary/20 rounded-lg flex items-center justify-center",children:p.jsx("i",{className:"fas fa-analytics text-ios-primary text-lg"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-theme-text font-semibold mb-1",children:"Advanced Analytics"}),p.jsx("p",{className:"text-theme-text-secondary text-sm",children:"AI-powered insights and predictive maintenance"})]})]})]})]}),p.jsxs("div",{className:"ios-card p-8 space-y-6",children:[p.jsxs("div",{className:"text-center space-y-6",children:[p.jsx("div",{className:"ios-header-brand flex items-center justify-center w-20 h-20 mx-auto",children:p.jsx("i",{className:"fas fa-user-circle text-white text-3xl"})}),p.jsx("h2",{className:"text-4xl font-bold text-theme-text",children:s("auth.welcome")}),p.jsx("p",{className:"text-theme-text-secondary text-xl font-medium",children:s("auth.signin_sub")})]}),p.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a={email:e.target.email.value,password:e.target.password.value};try{const e=await be.promise(function(e){return Ne("/api/login",{method:"POST",body:JSON.stringify(e)})}(a),{loading:s("auth.signin"),success:s("auth.signin"),error:e=>e.message||"Invalid credentials."});e.token&&t(e.token)}catch(r){console.error(r)}},className:"space-y-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"block text-sm font-semibold text-theme-text uppercase tracking-wider",children:s("auth.email")}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"email",name:"email",placeholder:s("auth.email_ph"),required:!0,className:"ios-input"}),p.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:p.jsx("i",{className:"fas fa-envelope text-theme-text-tertiary"})})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"block text-sm font-semibold text-theme-text uppercase tracking-wider",children:s("auth.password")}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"password",name:"password",placeholder:s("auth.password_ph"),required:!0,className:"ios-input"}),p.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:p.jsx("i",{className:"fas fa-lock text-theme-text-tertiary"})})]})]}),p.jsxs("button",{type:"submit",className:"w-full ios-button ios-button-primary py-4 text-lg",children:[p.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),s("auth.signin")]})]}),p.jsx("div",{className:"text-center pt-4",children:p.jsxs("p",{className:"text-theme-text-secondary",children:[s("auth.no_account")," ",p.jsx("button",{type:"button",onClick:()=>e("register"),className:"text-ios-primary font-bold hover:text-ios-secondary transition-colors duration-300 focus:outline-none",children:s("auth.register_here")})]})}),p.jsx("div",{className:"text-center pt-4 border-t border-theme-border",children:p.jsx("p",{className:"text-theme-text-tertiary text-sm font-medium",children:s("auth.demo")})})]})]})})}function Ve({setView:e}){const{themeConfig:t,isDark:s}=Ie(),{t:r}=a();return p.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 relative overflow-hidden",children:[p.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[p.jsx("div",{className:"absolute top-1/3 right-1/4 w-80 h-80 bg-neon-green/10 rounded-full blur-3xl animate-float"}),p.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-96 h-96 bg-neon-blue/10 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),p.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[700px] h-[700px] bg-neon-purple/5 rounded-full blur-3xl animate-pulse-slow"})]}),p.jsxs("div",{className:"w-full max-w-7xl grid grid-cols-1 lg:grid-cols-2 gap-12 relative z-10",children:[p.jsxs("div",{className:"hidden lg:flex flex-col justify-between glass-morphism rounded-4xl p-12 border border-white/10 shadow-glass-lg hover-lift",children:[p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"relative inline-block group",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-neon-green via-neon-blue to-neon-purple rounded-full blur-2xl opacity-60 group-hover:opacity-80 transition-opacity duration-500 animate-gradient-x"}),p.jsxs("div",{className:"relative bg-gradient-to-br from-neon-green/30 to-neon-blue/30 p-6 rounded-3xl backdrop-blur-xl border border-white/20 group-hover:scale-110 transition-transform duration-500",children:[p.jsx("i",{className:"fas fa-user-plus text-white text-4xl drop-shadow-2xl"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-3xl blur-xl"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h1",{className:"text-5xl font-bold font-space heading-gradient leading-tight tracking-tight",children:r("register.title")}),p.jsx("p",{className:"text-xl text-pro-light font-medium leading-relaxed",children:r("register.subtitle")})]})]}),p.jsxs("div",{className:"space-y-6 mt-12",children:[p.jsxs("div",{className:"flex items-center gap-4 p-6 glass-ultra rounded-2xl border border-white/5 group hover:border-neon-green/30 transition-all duration-300",children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx("i",{className:"fas fa-user-shield text-neon-green text-xl"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-1",children:"Secure Approval Process"}),p.jsx("p",{className:"text-pro-light text-sm",children:"All accounts require verification to ensure platform security"})]})]}),p.jsxs("div",{className:"flex items-center gap-4 p-6 glass-ultra rounded-2xl border border-white/5 group hover:border-neon-pink/30 transition-all duration-300",children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-pink/20 to-neon-purple/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx("i",{className:"fas fa-headset text-neon-pink text-xl"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-1",children:"24/7 Support Access"}),p.jsx("p",{className:"text-pro-light text-sm",children:"Round-the-clock assistance tools once your account is activated"})]})]}),p.jsxs("div",{className:"flex items-center gap-4 p-6 glass-ultra rounded-2xl border border-white/5 group hover:border-neon-blue/30 transition-all duration-300",children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx("i",{className:"fas fa-rocket text-neon-blue text-xl"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-1",children:"Instant Deployment"}),p.jsx("p",{className:"text-pro-light text-sm",children:"Get started immediately after account approval"})]})]})]})]}),p.jsxs("div",{className:"glass-morphism p-12 rounded-4xl border border-white/10 shadow-glass-lg space-y-8 card-enter",children:[p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-neon-green/20 to-neon-blue/20 rounded-2xl flex items-center justify-center mb-6 border border-white/10",children:p.jsx("i",{className:"fas fa-user-plus text-2xl text-white"})}),p.jsx("h2",{className:"text-3xl font-bold font-space text-white",children:r("register.create_title")}),p.jsx("p",{className:"text-pro-light text-lg",children:r("register.pending_info")})]}),p.jsxs("form",{onSubmit:async t=>{t.preventDefault();const s=t.target,a={username:s.username.value,email:s.email.value,password:s.password.value};if(a.password.length<6)be.error(r("register.min_chars"));else try{const t=function(e){return Ne("/api/register",{method:"POST",body:JSON.stringify(e)})}(a);await be.promise(t,{loading:r("register.create"),success:t=>(e("login"),t.message),error:e=>e.message||r("error.registration_failed",{defaultValue:"Registration failed. Please try again."})})}catch(i){console.error("Registration submission failed:",i)}},className:"space-y-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"block text-sm font-semibold text-pro-light uppercase tracking-wider",children:r("register.username")}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",name:"username",placeholder:r("register.username_ph"),required:!0,className:"w-full glass-ultra border border-white/10 rounded-2xl px-6 py-4 text-white placeholder-pro-light/60 focus:border-neon-green/50 focus:outline-none focus:ring-2 focus:ring-neon-green/20 transition-all duration-300 font-medium"}),p.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:p.jsx("i",{className:"fas fa-user text-pro-light/40"})})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"block text-sm font-semibold text-pro-light uppercase tracking-wider",children:r("auth.email")}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"email",name:"email",placeholder:r("auth.email_ph"),required:!0,className:"w-full glass-ultra border border-white/10 rounded-2xl px-6 py-4 text-white placeholder-pro-light/60 focus:border-neon-blue/50 focus:outline-none focus:ring-2 focus:ring-neon-blue/20 transition-all duration-300 font-medium"}),p.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:p.jsx("i",{className:"fas fa-envelope text-pro-light/40"})})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"block text-sm font-semibold text-pro-light uppercase tracking-wider",children:r("auth.password")}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"password",name:"password",placeholder:r("register.password_ph"),required:!0,className:"w-full glass-ultra border border-white/10 rounded-2xl px-6 py-4 text-white placeholder-pro-light/60 focus:border-neon-purple/50 focus:outline-none focus:ring-2 focus:ring-neon-purple/20 transition-all duration-300 font-medium"}),p.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:p.jsx("i",{className:"fas fa-lock text-pro-light/40"})})]}),p.jsx("p",{className:"text-pro-light/70 text-xs mt-2 font-medium",children:r("register.min_chars")})]}),p.jsx("button",{type:"submit",className:"w-full pro-button py-5 px-8 text-white font-bold text-lg rounded-2xl hover-lift group relative overflow-hidden",children:p.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-3",children:[p.jsx("i",{className:"fas fa-user-plus group-hover:scale-110 transition-transform duration-300"}),r("register.create")]})})]}),p.jsx("div",{className:"text-center pt-4",children:p.jsxs("p",{className:"text-pro-light",children:[r("register.have_account")," ",p.jsx("button",{type:"button",onClick:()=>e("login"),className:"text-neon-green font-bold hover:text-neon-blue transition-colors duration-300 focus:outline-none group",children:p.jsx("span",{className:"border-b border-transparent group-hover:border-neon-blue transition-all duration-300",children:r("register.signin_here")})})]})}),p.jsx("div",{className:"glass-ultra p-6 rounded-2xl border border-neon-blue/20 bg-gradient-to-r from-neon-blue/5 to-neon-purple/5",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-xl flex items-center justify-center flex-shrink-0 mt-1",children:p.jsx("i",{className:"fas fa-info-circle text-neon-blue text-lg"})}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-neon-blue font-bold text-sm uppercase tracking-wider",children:r("register.approval.title")}),p.jsx("p",{className:"text-pro-light text-sm leading-relaxed",children:r("register.approval.body")})]})]})})]})]})]})}function Ye({label:e,onRemove:t}){return p.jsxs("span",{className:"inline-flex items-center gap-1 bg-white/10 border border-white/20 text-white text-xs font-medium px-2 py-1 rounded-full",children:[e,p.jsx("button",{type:"button",onClick:t,className:"opacity-80 hover:opacity-100",children:p.jsx("i",{className:"fas fa-times text-[10px]"})})]})}const Be=["$20 - $40/hr","$40 - $80/hr","$80 - $120/hr","$120 - $200/hr"];function Je({onClose:t}){const{themeConfig:s}=Ie(),{t:r}=a(),[i,n]=e.useState(1),[o,l]=e.useState(""),[d,c]=e.useState([]),[m,u]=e.useState(""),[x,h]=e.useState(""),[g,f]=e.useState(""),[b,j]=e.useState(["",""]),v=e.useMemo(()=>d.length<3&&m.trim().length>0,[d,m]),y=()=>{v&&(c(e=>Array.from(new Set([...e,m.trim()]))),u(""))};return e.useEffect(()=>{const e=localStorage.getItem("onboarding.profile");if(e)try{const t=JSON.parse(e);l(t.oneLiner||""),c(Array.isArray(t.skills)?t.skills.slice(0,3):[]),h(t.hourly||""),j(Array.isArray(t.links)?t.links.slice(0,2):["",""]),f(t.photoPreview||"")}catch{}},[]),p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),p.jsxs("div",{className:"relative w-full max-w-5xl grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:`elevated-card bg-gradient-to-br ${s.cardBg} border p-6 md:p-10`,children:[1===i&&p.jsxs("div",{children:[p.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/70 mb-2",children:[r("onboarding.step")," 1/2"]}),p.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:r("onboarding.build_profile")}),p.jsx("label",{className:"block text-sm text-white/80 mb-2",children:r("onboarding.one_liner")}),p.jsx("textarea",{rows:3,value:o,onChange:e=>l(e.target.value.slice(0,60)),placeholder:r("onboarding.one_liner_ph"),className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/60 mb-6"}),p.jsx("label",{className:"block text-sm text-white/80 mb-2",children:r("onboarding.skills")}),p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("input",{value:m,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key?(e.preventDefault(),y()):null,placeholder:r("onboarding.skill_ph"),className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/60"}),p.jsx("button",{type:"button",disabled:!v,onClick:y,className:"px-3 py-2 rounded-lg text-sm text-white "+(v?"bg-orange-600 hover:bg-orange-700":"bg-white/10"),children:r("onboarding.add")})]}),p.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.map(e=>p.jsx(Ye,{label:e,onRemove:()=>c(t=>t.filter(t=>t!==e))},e)),0===d.length&&p.jsx("span",{className:"text-white/50 text-xs",children:r("onboarding.up_to_three")})]}),p.jsx("label",{className:"block text-sm text-white/80 mb-2",children:r("onboarding.rate")}),p.jsx("div",{className:"mb-6",children:p.jsxs("select",{value:x,onChange:e=>h(e.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-3 text-white",children:[p.jsx("option",{value:"",className:"bg-slate-900",children:r("onboarding.select_rate")}),Be.map(e=>p.jsx("option",{className:"bg-slate-900",value:e,children:e},e))]})}),p.jsx("label",{className:"block text-sm text-white/80 mb-2",children:r("onboarding.photo")}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-white/10 border border-white/20 flex items-center justify-center",children:g?p.jsx("img",{src:g,alt:"preview",className:"w-full h-full object-cover"}):p.jsx("i",{className:"fas fa-user text-white/40"})}),p.jsxs("label",{className:"cursor-pointer bg-white/10 hover:bg-white/20 text-white text-sm px-3 py-2 rounded-lg border border-white/20",children:[p.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{const t=e.target.files&&e.target.files[0];if(!t)return;const s=new FileReader;s.onload=e=>{var t;return f(String((null==(t=e.target)?void 0:t.result)||""))},s.readAsDataURL(t)}}),r("onboarding.upload_photo")]})]}),p.jsx("div",{className:"flex justify-end gap-3 mt-10",children:p.jsx("button",{type:"button",onClick:()=>n(e=>Math.min(2,e+1)),className:"px-5 py-2.5 rounded-lg text-white bg-gradient-to-r from-orange-600 to-rose-600 hover:from-orange-700 hover:to-rose-700 shadow-lg",children:r("onboarding.continue")})})]}),2===i&&p.jsxs("div",{children:[p.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/70 mb-2",children:[r("onboarding.step")," 2/2"]}),p.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:r("onboarding.add_links")}),p.jsx("div",{className:"space-y-4",children:[0,1].map(e=>p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-white/80 mb-2",children:r(0===e?"onboarding.link_1":"onboarding.link_2")}),p.jsx("input",{type:"url",placeholder:r("onboarding.link_ph"),value:b[e],onChange:t=>j(s=>s.map((s,a)=>a===e?t.target.value:s)),className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/60"})]},e))}),p.jsxs("div",{className:"flex justify-between mt-10",children:[p.jsx("button",{type:"button",onClick:()=>n(e=>Math.max(1,e-1)),className:"px-5 py-2.5 rounded-lg text-white/80 bg-white/10 hover:bg-white/20 border border-white/20",children:r("onboarding.back")}),p.jsx("button",{type:"button",onClick:()=>{try{const e={oneLiner:o,skills:d,hourly:x,links:b,photoPreview:g,completedAt:Date.now()};localStorage.setItem("onboarding.profile",JSON.stringify(e)),localStorage.setItem("onboardingCompleted","true")}catch{}null==t||t()},className:"px-5 py-2.5 rounded-lg text-white bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 shadow-lg",children:r("onboarding.complete")})]})]})]}),p.jsx("div",{className:`elevated-card bg-gradient-to-br ${s.cardBg} border p-6 md:p-10 flex items-center`,children:p.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[p.jsx("div",{className:"mx-auto w-28 h-28 rounded-full overflow-hidden bg-white/10 border border-white/20 flex items-center justify-center mb-4",children:g?p.jsx("img",{src:g,alt:"preview",className:"w-full h-full object-cover"}):p.jsx("i",{className:"fas fa-user text-white/40 text-3xl"})}),p.jsx("h3",{className:"text-2xl font-semibold text-white text-center mb-2",children:r("onboarding.preview_name")}),p.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mb-4",children:[d.map(e=>p.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-white/10 border border-white/20 text-white/90",children:e},e)),x&&p.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30",children:x})]}),p.jsx("div",{className:"text-center text-white/80 text-sm min-h-[40px] mb-6",children:o||r("onboarding.preview_oneliner")}),p.jsx("div",{className:"space-y-3",children:b.filter(Boolean).map((e,t)=>p.jsx("a",{target:"_blank",rel:"noreferrer",href:e,className:"block w-full text-center px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white/90 hover:bg-white/20 truncate",children:e},t))})]})})]})]})}function Xe(){const{user:e,logout:t}=ye(),{t:s}=a();return p.jsxs("div",{className:"min-h-screen bg-theme-bg",children:[p.jsx(Pe,{}),p.jsxs("button",{onClick:t,className:"ios-logout-button",children:[p.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),p.jsx("span",{className:"hidden sm:block",children:s("auth.logout")})]}),p.jsx("main",{className:"container mx-auto px-6 py-8 max-w-7xl",children:p.jsx("div",{className:"fade-in-up",children:(()=>{switch(null==e?void 0:e.role){case"super_admin":return p.jsx(Ue,{});case"admin":return p.jsx(ze,{});default:return p.jsxs("div",{className:"ios-card max-w-2xl mx-auto mt-20 text-center",children:[p.jsx("div",{className:"w-20 h-20 mx-auto bg-ios-primary rounded-full flex items-center justify-center mb-6",children:p.jsx("i",{className:"fas fa-user-shield text-white text-2xl"})}),p.jsx("h2",{className:"text-2xl font-bold text-theme-text mb-4",children:s("auth.welcome",{defaultValue:"Welcome!"})}),p.jsx("p",{className:"text-theme-text-secondary text-lg",children:s("auth.no_admin_privileges",{defaultValue:"You do not have admin privileges for this platform."})})]})}})()})})]})}function He(){const{user:t}=ye(),[s,a]=e.useState("login"),[r,i]=e.useState(()=>{try{return t&&"true"!==localStorage.getItem("onboardingCompleted")}catch{return!1}});return p.jsxs("div",{className:"ios-bg min-h-screen",children:[p.jsx(fe,{position:"top-center",toastOptions:{style:{background:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"12px"}}}),p.jsx("div",{className:"flex-1",children:t?p.jsx(Xe,{}):"register"===s?p.jsx(Ve,{setView:a}):p.jsx(Me,{setView:a})}),t&&r&&p.jsx(Je,{onClose:()=>i(!1)})]})}const Ge={brand:"Hamza Assistance",tagline:"Professional Dispatch System","theme.switch":"Switch to {{mode}} theme","stats.total":"Total","stats.pending":"Pending","stats.active":"Active","stats.done":"Done","role.super_admin":"Super Admin","role.admin":"Admin","auth.logout":"Logout","auth.welcome":"Welcome Back","auth.signin_sub":"Sign in to access the dispatch system","auth.email":"Email Address","auth.email_ph":"Enter your email","auth.password":"Password","auth.password_ph":"Enter your password","auth.signin":"Sign In","auth.no_account":"Don't have an account?","auth.register_here":"Register here","auth.demo":"Demo: super@roadside.com / superadmin123","register.title":"Join Our Team","register.subtitle":"Create your dispatch system account","register.create_title":"Create Account","register.pending_info":"Your account will be pending approval","register.username":"Username","register.username_ph":"Choose a username","register.password_ph":"Create a strong password","register.min_chars":"Minimum 6 characters required","register.create":"Create Account","register.have_account":"Already have an account?","register.signin_here":"Sign in here","register.approval.title":"Account Approval Process","register.approval.body":"After registration, your account will be reviewed by a super administrator. You'll receive access once approved.","dashboard.admin":"Admin Dashboard","dashboard.new_request":"New Request","dashboard.total":"Total","dashboard.pending":"Pending","dashboard.in_progress":"In Progress","dashboard.completed":"Completed","dashboard.filters.all":"All Statuses","dashboard.filters.submitted":"Submitted","dashboard.filters.in_progress":"In Progress","dashboard.filters.completed":"Completed","dashboard.search_ph":"Search user info...","dashboard.loading":"Loading Requests...","dashboard.empty.title":"No requests yet","dashboard.empty.body":"Start by creating a new service request for a customer. You can add all the details, attach photos, and assign it to an operator.","dashboard.empty.cta":"Create Your First Request","user.submit_title":"Submit a Service Request","user.info_label":"Full Name, Car Model, Phone, Location","user.info_ph":"Paste your information here...","user.image_url":"Or Paste Image URL","user.or":"OR","user.upload_photo":"Upload Photo","user.upload_file":"Upload a file","user.file_hint":"PNG, JPG up to 10MB","user.send":"Send Request","request.status.submitted":"Submitted","request.status.in_progress":"In Progress","request.status.completed":"Completed","request.issue.title":"Issue Description","request.assignment.title":"Assignment Details","request.assignment.operator":"Operator:","request.assignment.assigned_by":"Assigned by:","request.actions.resolve":"Mark Resolved","request.actions.assign":"Assign","request.actions.reassign":"Reassign","request.actions.delete":"Delete Request","footer.body":"Your trusted partner for emergency roadside assistance. We provide 24/7 support to get you back on the road safely and quickly.","footer.rights":"All rights reserved.","footer.made":"Made with ❤️ by your team.","modal.assignment.title":"Assign Request","modal.assignment.select_operator":"Select Operator","modal.assignment.choose_operator":"Choose an operator...","modal.assignment.select_user":"Select User","modal.assignment.choose_user":"Choose a user...","modal.assignment.assign":"Assign","modal.assignment.assigning":"Assigning...","modal.cancel":"Cancel","modal.create_request.title":"Create Service Request","modal.customer_info":"Customer Information","modal.customer_name":"Customer Name *","modal.customer_name_ph":"Enter customer full name","modal.phone":"Phone Number *","modal.phone_ph":"+212 6XX XXX XXX","modal.location":"Location *","modal.location_ph":"Address or landmark","modal.vehicle_info":"Vehicle Information","modal.car_model":"Car Model *","modal.car_model_ph":"e.g., Toyota Corolla","modal.year":"Year","modal.urgency":"Urgency Level","modal.urgency.low":"Low","modal.urgency.medium":"Medium","modal.urgency.high":"High","modal.urgency.emergency":"Emergency","modal.issue":"Issue Description *","modal.issue_ph":"Describe the issue in detail...","modal.attach_photo":"Attach Photo (Optional)","modal.upload_device":"Upload from device","modal.click_upload":"Click to upload image","modal.preview":"Preview:","modal.or_paste_url":"Or paste image URL","modal.operator_optional":"Assign to Operator (Optional)","modal.operator_select":"Select operator...","modal.create":"Create Request","language.en":"English","language.fr":"Français","language.switcher":"Language","auth.no_admin_privileges":"Welcome! You do not have admin privileges.","error.submit_failed":"Failed to submit request. Please try again.","error.load_dashboard":"Could not load dashboard data. Please check the console.","toast.request_completed":"Request marked as completed!","error.update_status_failed":"Failed to update status.","toast.request_created":"Request created successfully!","toast.request_assigned":"Request assigned to operator!","error.assignment_partial":"Request created but assignment failed","error.create_request_failed":"Failed to create request.","error.assignment_select_both":"Please select both an operator and a user.","toast.assignment_success":"Assignment successful!","error.assignment_failed":"Assignment failed.","common.name":"Name","common.phone":"Phone","common.save":"Save","onboarding.step":"Step","onboarding.build_profile":"Build your profile","onboarding.one_liner":"One-liner","onboarding.one_liner_ph":"Web Developer building responsive and modern websites.","onboarding.skills":"Skills","onboarding.skill_ph":"Add a skill and press Enter...","onboarding.add":"Add","onboarding.up_to_three":"Add up to three skills","onboarding.rate":"Hourly rate","onboarding.select_rate":"Select your hourly rate","onboarding.photo":"Profile photo","onboarding.upload_photo":"Upload profile photo","onboarding.continue":"Continue","onboarding.add_links":"Add social links","onboarding.link_1":"Link #1","onboarding.link_2":"Link #2","onboarding.link_ph":"https://instagram.com/yourname or https://x.com/yourname","onboarding.back":"Back","onboarding.complete":"Complete","onboarding.preview_name":"Liam Basil","onboarding.preview_oneliner":"Your one-liner will appear here."},We={brand:"Hamza Assistance",tagline:"Système professionnel de dispatching","theme.switch":"Passer au thème {{mode}}","stats.total":"Total","stats.pending":"En attente","stats.active":"Actif","stats.done":"Terminé","role.super_admin":"Super Administrateur","role.admin":"Administrateur","auth.logout":"Se déconnecter","auth.welcome":"Bon retour","auth.signin_sub":"Connectez-vous pour accéder au système","auth.email":"Adresse e-mail","auth.email_ph":"Entrez votre e-mail","auth.password":"Mot de passe","auth.password_ph":"Entrez votre mot de passe","auth.signin":"Se connecter","auth.no_account":"Vous n'avez pas de compte ?","auth.register_here":"Inscrivez-vous ici","auth.demo":"Démo : super@roadside.com / superadmin123","register.title":"Rejoignez notre équipe","register.subtitle":"Créez votre compte pour le système de dispatching","register.create_title":"Créer un compte","register.pending_info":"Votre compte sera en attente d'approbation","register.username":"Nom d'utilisateur","register.username_ph":"Choisissez un nom d'utilisateur","register.password_ph":"Créez un mot de passe fort","register.min_chars":"Minimum 6 caractères requis","register.create":"Créer un compte","register.have_account":"Vous avez déjà un compte ?","register.signin_here":"Connectez-vous ici","register.approval.title":"Processus d'approbation du compte","register.approval.body":"Après l'inscription, votre compte sera examiné par un super administrateur. Vous recevrez l'accès une fois approuvé.","dashboard.admin":"Tableau de bord Admin","dashboard.new_request":"Nouvelle demande","dashboard.total":"Total","dashboard.pending":"En attente","dashboard.in_progress":"En cours","dashboard.completed":"Terminé","dashboard.filters.all":"Tous les statuts","dashboard.filters.submitted":"Soumis","dashboard.filters.in_progress":"En cours","dashboard.filters.completed":"Terminé","dashboard.search_ph":"Rechercher des infos utilisateur...","dashboard.loading":"Chargement des demandes...","dashboard.empty.title":"Aucune demande pour le moment","dashboard.empty.body":"Commencez par créer une nouvelle demande de service pour un client. Vous pouvez ajouter tous les détails, joindre des photos et l'assigner à un opérateur.","dashboard.empty.cta":"Créer votre première demande","user.submit_title":"Soumettre une demande de service","user.info_label":"Nom complet, Modèle de voiture, Téléphone, Localisation","user.info_ph":"Collez vos informations ici...","user.image_url":"Ou collez l'URL de l'image","user.or":"OU","user.upload_photo":"Téléverser une photo","user.upload_file":"Téléverser un fichier","user.file_hint":"PNG, JPG jusqu'à 10 Mo","user.send":"Envoyer la demande","request.status.submitted":"Soumis","request.status.in_progress":"En cours","request.status.completed":"Terminé","request.issue.title":"Description du problème","request.assignment.title":"Détails de l'assignation","request.assignment.operator":"Opérateur :","request.assignment.assigned_by":"Assigné par :","request.actions.resolve":"Marquer comme résolu","request.actions.assign":"Assigner","request.actions.reassign":"Réassigner","request.actions.delete":"Supprimer la demande","footer.body":"Votre partenaire de confiance pour l'assistance routière d'urgence. Nous offrons un support 24/7 pour vous remettre sur la route en toute sécurité et rapidement.","footer.rights":"Tous droits réservés.","footer.made":"Fait avec ❤️ par votre équipe.","modal.assignment.title":"Assigner la demande","modal.assignment.select_operator":"Sélectionner un opérateur","modal.assignment.choose_operator":"Choisissez un opérateur...","modal.assignment.select_user":"Sélectionner un utilisateur","modal.assignment.choose_user":"Choisissez un utilisateur...","modal.assignment.assign":"Assigner","modal.assignment.assigning":"Assignation...","modal.cancel":"Annuler","modal.create_request.title":"Créer une demande de service","modal.customer_info":"Informations du client","modal.customer_name":"Nom du client *","modal.customer_name_ph":"Entrez le nom complet du client","modal.phone":"Numéro de téléphone *","modal.phone_ph":"+212 6XX XXX XXX","modal.location":"Localisation *","modal.location_ph":"Adresse ou repère","modal.vehicle_info":"Informations du véhicule","modal.car_model":"Modèle de voiture *","modal.car_model_ph":"ex. Toyota Corolla","modal.year":"Année","modal.urgency":"Niveau d'urgence","modal.urgency.low":"Faible","modal.urgency.medium":"Moyen","modal.urgency.high":"Élevé","modal.urgency.emergency":"Urgence","modal.issue":"Description du problème *","modal.issue_ph":"Décrivez le problème en détail...","modal.attach_photo":"Joindre une photo (optionnel)","modal.upload_device":"Téléverser depuis l'appareil","modal.click_upload":"Cliquez pour téléverser une image","modal.preview":"Aperçu :","modal.or_paste_url":"Ou collez l'URL de l'image","modal.operator_optional":"Assigner à un opérateur (optionnel)","modal.operator_select":"Sélectionnez un opérateur...","modal.create":"Créer la demande","language.en":"English","language.fr":"Français","language.switcher":"Langue","onboarding.step":"Étape","onboarding.build_profile":"Construisez votre profil","onboarding.one_liner":"Phrase d'accroche","onboarding.one_liner_ph":"Développeur Web créant des sites modernes et responsives.","onboarding.skills":"Compétences","onboarding.skill_ph":"Ajoutez une compétence puis Entrée...","onboarding.add":"Ajouter","onboarding.up_to_three":"Ajoutez jusqu'à trois compétences","onboarding.rate":"Taux horaire","onboarding.select_rate":"Sélectionnez votre taux horaire","onboarding.photo":"Photo de profil","onboarding.upload_photo":"Téléverser une photo","onboarding.continue":"Continuer","onboarding.add_links":"Ajouter des liens sociaux","onboarding.link_1":"Lien n°1","onboarding.link_2":"Lien n°2","onboarding.link_ph":"https://instagram.com/votrenom ou https://x.com/votrenom","onboarding.back":"Retour","onboarding.complete":"Terminer","onboarding.preview_name":"Liam Basil","onboarding.preview_oneliner":"Votre phrase d'accroche apparaîtra ici."},Ke="undefined"!=typeof window?localStorage.getItem("language"):null;r.use(i).init({resources:{en:{translation:Ge},fr:{translation:We}},lng:Ke||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});g.createRoot(document.getElementById("root")).render(p.jsx(s.StrictMode,{children:p.jsx(Ae,{children:p.jsx(ve,{children:p.jsx(He,{})})})}));
